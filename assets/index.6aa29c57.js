import{_ as g,E as C,r,o as _,c as v,a as t,w as a,g as p,d as T,e as x,f as k,b as d,F as S,t as z}from"./index.8bc8b4af.js";const E={data(){return{impedirClose:!1,form:{nombre:null}}},methods:{abrir(){this.form.nombre=null,this.$refs.modal.abrir()},cerrar(){this.$refs.modal.cerrar()},onSubmit(){let e={nombre:this.form.nombre};this.axios.post(this.base_url+"/categoria/crear",e).then(o=>{C({type:"success",message:"\xA1Categoria a\xF1adida con \xE9xito!"}),this.$emit("actualizarTabla"),this.cerrar()})},deshabilitarBtnGuardar(){return this.form.nombre==null||this.form.nombre==""}}},V=p(" Guardar");function B(e,o,$,y,i,l){const n=r("el-input"),s=r("el-form-item"),m=r("el-form"),f=r("el-button"),b=r("modal");return _(),v("div",null,[t(b,{ref:"modal",titulo:"Nueva categoria","impedir-close":i.impedirClose},{footer:a(()=>[t(f,{type:"primary",onClick:o[1]||(o[1]=c=>l.onSubmit()),disabled:l.deshabilitarBtnGuardar()},{default:a(()=>[V]),_:1},8,["disabled"])]),default:a(()=>[t(m,{"label-width":"120px",rules:e.formRules},{default:a(()=>[t(s,{label:"Nombre",prop:"nombre"},{default:a(()=>[t(n,{modelValue:i.form.nombre,"onUpdate:modelValue":o[0]||(o[0]=c=>i.form.nombre=c)},null,8,["modelValue"])]),_:1})]),_:1},8,["rules"])]),_:1},8,["impedir-close"])])}var M=g(E,[["render",B]]);const A={data(){return{form:{nombre:null},id:null,categorias:[],loading:!1}},methods:{abrir(e){this.loading=!0,this.id=null,this.id=e,this.$refs.modal.abrir(),this.form.nombre=null,this.getDatos()},cerrar(){this.$refs.modal.cerrar()},async getDatos(){await this.axios.get(this.base_url+"/categoria/obtenerDatos/"+this.id).then(e=>{const o=e.data;console.log(o),o!=null?(this.form.nombre=o.nombre,this.loading=!1):this.cerrar()})},onSubmit(){let e={id:this.id,nombre:this.form.nombre};this.axios.put(this.base_url+"/categoria/actualizar/"+this.id,e).then(o=>{C({type:"success",message:"\xA1Categoria modificada con \xE9xito!"}),this.$emit("actualizarTabla"),this.cerrar()}).catch(o=>{console.log(o)})},deshabilitarBtnGuardar(){return this.form.nombre==null||this.form.nombre==""}}},D=p("Guardar");function G(e,o,$,y,i,l){const n=r("el-input"),s=r("el-form-item"),m=r("el-form"),f=r("el-button"),b=r("modal"),c=T("loading");return _(),v("div",null,[t(b,{ref:"modal",titulo:"Modificar categoria","impedir-close":e.impedirClose},{footer:a(()=>[t(f,{type:"primary",onClick:o[1]||(o[1]=h=>l.onSubmit()),disabled:l.deshabilitarBtnGuardar()},{default:a(()=>[D]),_:1},8,["disabled"])]),default:a(()=>[x((_(),k(m,{"label-width":"120px",rules:e.formRules},{default:a(()=>[t(s,{label:"Nombre",prop:"nombre"},{default:a(()=>[t(n,{modelValue:i.form.nombre,"onUpdate:modelValue":o[0]||(o[0]=h=>i.form.nombre=h)},null,8,["modelValue"])]),_:1})]),_:1},8,["rules"])),[[c,i.loading]])]),_:1},8,["impedir-close"])])}var F=g(A,[["render",G]]);const R={data(){return{id:null}},methods:{abrir(e){this.id=null,this.$refs.modal.abrir(),this.id=e},cerrar(){this.$refs.modal.cerrar()},async eliminar(){await this.axios.delete(this.base_url+"/categoria/eliminar/"+this.id).then(e=>{C({message:"\xA1Categor\xEDa eliminada con \xE9xito!",type:"success"}),this.$emit("actualizarTabla"),this.cerrar()})}}},U=d("h3",null,"\xBFDesea eliminar la categor\xEDa?",-1),L={style:{float:"right"}},j=p(" Cancelar "),q=p(" Confirmar ");function H(e,o,$,y,i,l){const n=r("el-button"),s=r("modal");return _(),v("div",null,[t(s,{ref:"modal",titulo:"Eliminar categoria","impedir-close":e.impedirClose},{default:a(()=>[d("div",null,[U,d("div",L,[t(n,{type:"danger",onClick:o[0]||(o[0]=m=>l.cerrar())},{default:a(()=>[j]),_:1}),t(n,{type:"primary",onClick:o[1]||(o[1]=m=>l.eliminar())},{default:a(()=>[q]),_:1})])])]),_:1},8,["impedir-close"])])}var I=g(R,[["render",H]]);const J={components:{ModalNuevo:M,ModalModificar:F,ModalEliminar:I},data(){return{categorias:[],categoriasSelect:[],loading:!1,value:null}},mounted(){this.obtenerTodos()},methods:{async obtenerTodos(){this.loading=!0,await this.axios.get(this.base_url+"/categoria/obtenerTodos").then(e=>{this.categorias=e.data,console.log(this.categorias)}),this.loading=!1,this.obtenerTodosSelect()},async obtenerTodosSelect(){await this.axios.get(this.base_url+"/categoria/obtenerTodosSelect").then(e=>{this.categoriasSelect=e.data,console.log(this.categoriasSelect)})},mostrar(){console.log(this.value.id)},obtenerLabel(e){console.log(e)}}},K=d("h1",null,"Categor\xEDas",-1),O=p(" Nuevo "),P={class:"contenedor-tabla"},Q=d("span",{class:"material-icons"},"edit",-1),W=d("span",{class:"material-icons"},"delete",-1);function X(e,o,$,y,i,l){const n=r("el-button"),s=r("el-table-column"),m=r("el-table"),f=r("el-card"),b=r("modal-nuevo"),c=r("modal-modificar"),h=r("modal-eliminar"),w=T("loading");return _(),v(S,null,[d("main",null,[t(f,null,{header:a(()=>[K]),default:a(()=>[t(n,{type:"primary",onClick:o[0]||(o[0]=u=>e.$refs.modalNuevo.abrir()),class:"btnElement",style:{"margin-left":"10px"}},{default:a(()=>[O]),_:1}),d("div",P,[x((_(),k(m,{data:i.categorias,fixed:""},{default:a(()=>[t(s,{label:"Nombre",prop:"descripcion"},{default:a(u=>[d("span",null,z(u.row.nombre),1)]),_:1}),t(s,{label:"Editar",prop:"editar","header-align":"right",align:"right"},{default:a(u=>[t(n,{type:"primary",circle:"",onClick:N=>e.$refs.modalModificar.abrir(u.row.id)},{default:a(()=>[Q]),_:2},1032,["onClick"])]),_:1}),t(s,{label:"Eliminar",prop:"eliminar","header-align":"right",align:"right"},{default:a(u=>[t(n,{type:"danger",circle:"",onClick:N=>e.$refs.modalEliminar.abrir(u.row.id)},{default:a(()=>[W]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[w,i.loading]])])]),_:1})]),t(b,{ref:"modalNuevo",onActualizarTabla:l.obtenerTodos},null,8,["onActualizarTabla"]),t(c,{ref:"modalModificar",onActualizarTabla:l.obtenerTodos},null,8,["onActualizarTabla"]),t(h,{ref:"modalEliminar",onActualizarTabla:l.obtenerTodos},null,8,["onActualizarTabla"])],64)}var Z=g(J,[["render",X]]);export{Z as default};
