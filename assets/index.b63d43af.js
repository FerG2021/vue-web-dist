import{_ as C,E as v,r as a,o as p,c as w,a as r,w as t,g as y,d as V,e as z,f as x,b as i,F as U,t as N}from"./index.ec5771ba.js";const A={data(){return{impedirClose:!1,form:{id:null,nombre:null},rules:{id:[{required:!0,message:"Por favor ingrese el id del rubro.",trigger:"change"}],nombre:[{required:!0,message:"Por favor ingrese el nombre del rubro.",trigger:"change"}]}}},methods:{abrir(){this.form.id=null,this.form.nombre=null,this.$refs.modal.abrir()},cerrar(){this.$refs.modal.cerrar()},async onSubmit(){let o={id:this.form.id,nombre:this.form.nombre};const e=await this.axios.post("/api/rubro/crear",o);if(e.data.code==200)v({type:"success",message:"\xA1Rubro a\xF1adido con \xE9xito!"}),this.$emit("actualizarTabla"),this.cerrar();else if(e.data.code==400){let s="// ";Object.values(e.data.data).forEach(l=>{s=s+" "+l+" //"}),v({type:"error",grouping:!0,message:s,duration:5e3})}},deshabilitarBtnGuardar(){return this.form.id==null||this.form.id==""||this.form.id==0||this.form.nombre==null||this.form.nombre==""}}},L=y(" Guardar");function M(o,e,s,u,l,n){const m=a("el-input-number"),c=a("el-form-item"),b=a("el-input"),h=a("el-form"),g=a("el-button"),f=a("modal");return p(),w("div",null,[r(f,{ref:"modal",titulo:"Nuevo rubro","impedir-close":l.impedirClose},{footer:t(()=>[r(g,{type:"primary",onClick:e[2]||(e[2]=_=>n.onSubmit()),disabled:n.deshabilitarBtnGuardar()},{default:t(()=>[L]),_:1},8,["disabled"])]),default:t(()=>[r(h,{"label-width":"120px",ref:"form",model:l.form,rules:l.rules,"status-icon":""},{default:t(()=>[r(c,{label:"ID",prop:"id"},{default:t(()=>[r(m,{modelValue:l.form.id,"onUpdate:modelValue":e[0]||(e[0]=_=>l.form.id=_),controls:!1,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),r(c,{label:"Nombre",prop:"nombre"},{default:t(()=>[r(b,{modelValue:l.form.nombre,"onUpdate:modelValue":e[1]||(e[1]=_=>l.form.nombre=_)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["impedir-close"])])}var $=C(A,[["render",M]]);const E={data(){return{form:{nombre:null},id:null,categorias:[],loading:!1}},methods:{abrir(o){this.loading=!0,this.id=null,this.id=o,this.$refs.modal.abrir(),this.form.nombre=null,this.getDatos()},cerrar(){this.$refs.modal.cerrar()},async getDatos(){await this.axios.get(this.base_url+"/unidad-medida/obtenerDatos/"+this.id).then(o=>{const e=o.data;console.log(e),e!=null?(this.form.nombre=e.nombre,this.loading=!1):this.cerrar()})},onSubmit(){let o={id:this.id,nombre:this.form.nombre};this.axios.put(this.base_url+"/unidad-medida/actualizar/"+this.id,o).then(e=>{v({type:"success",message:"\xA1Unidad de medida modificada con \xE9xito!"}),this.$emit("actualizarTabla"),this.cerrar()}).catch(e=>{console.log(e)})},deshabilitarBtnGuardar(){return this.form.nombre==null||this.form.nombre==""}}},G=y("Guardar");function P(o,e,s,u,l,n){const m=a("el-input"),c=a("el-form-item"),b=a("el-form"),h=a("el-button"),g=a("modal"),f=V("loading");return p(),w("div",null,[r(g,{ref:"modal",titulo:"Modificar unidad de medida","impedir-close":o.impedirClose},{footer:t(()=>[r(h,{type:"primary",onClick:e[1]||(e[1]=_=>n.onSubmit()),disabled:n.deshabilitarBtnGuardar()},{default:t(()=>[G]),_:1},8,["disabled"])]),default:t(()=>[z((p(),x(b,{"label-width":"120px",rules:o.formRules},{default:t(()=>[r(c,{label:"Nombre",prop:"nombre"},{default:t(()=>[r(m,{modelValue:l.form.nombre,"onUpdate:modelValue":e[0]||(e[0]=_=>l.form.nombre=_)},null,8,["modelValue"])]),_:1})]),_:1},8,["rules"])),[[f,l.loading]])]),_:1},8,["impedir-close"])])}var F=C(E,[["render",P]]);const R={data(){return{id:null}},methods:{abrir(o){this.id=null,this.$refs.modal.abrir(),this.id=o},cerrar(){this.$refs.modal.cerrar()},async eliminar(){await this.axios.delete(this.base_url+"/unidad-medida/eliminar/"+this.id).then(o=>{v({message:"\xA1Unidad de medida eliminada con \xE9xito!",type:"success"}),this.$emit("actualizarTabla"),this.cerrar()})}}},j=i("h3",null,"\xBFDesea eliminar la unidad de medida?",-1),q={style:{float:"right"}},O=y(" Cancelar "),H=y(" Confirmar ");function J(o,e,s,u,l,n){const m=a("el-button"),c=a("modal");return p(),w("div",null,[r(c,{ref:"modal",titulo:"Eliminar unidad de medida","impedir-close":o.impedirClose},{default:t(()=>[i("div",null,[j,i("div",q,[r(m,{type:"danger",onClick:e[0]||(e[0]=b=>n.cerrar())},{default:t(()=>[O]),_:1}),r(m,{type:"primary",onClick:e[1]||(e[1]=b=>n.eliminar())},{default:t(()=>[H]),_:1})])])]),_:1},8,["impedir-close"])])}var K=C(R,[["render",J]]);const Q={components:{ModalNuevo:$,ModalModificar:F,ModalEliminar:K},data(){return{rubros:[],rubrosNuevo:[],loading:!1,pageSize:20,currentPage:1,filtroNombre:"",filtroID:null,filtroCodigo:""}},mounted(){this.obtenerTodos()},watch:{filtroNombre(o){o==""?this.rubrosNuevo=this.rubros:this.rubrosNuevo=this.buscarNombre(o)},filtroID(o){o==null?this.rubrosNuevo=this.rubros:this.rubrosNuevo=this.buscarID(o)},filtroCodigo(o){o==""?this.rubrosNuevo=this.rubros:this.rubrosNuevo=this.buscarCodigo(o)}},methods:{async obtenerTodos(){this.loading=!0,await this.axios.get("/api/rubro/obtenerTodos").then(o=>{this.rubros=this.rubrosNuevo=o.data}),this.loading=!1},handleCurrentChange:function(o){this.$data.currentPage=o},handleSizeChange:function(o){this.$data.pageSize=o},buscarNombre(o){return this.rubros.filter(e=>{let s=e.rubro_nombre.toLowerCase(),u=o.toLowerCase();if(s.includes(u))return e})},buscarID(o){return this.rubros.filter(e=>{let s=e.rubro_id.toString(),u=o.toString();if(s.includes(u))return e})},buscarCodigo(o){return this.rubros.filter(e=>{let s=e.rubro_codigo.toLowerCase(),u=o.toLowerCase();if(s.includes(u))return e})}}},W=i("h1",null,"Rubros",-1),X={class:"demo-collapse"},Y=i("h4",{style:{color:"#95989e"}},[i("span",{class:"material-icons"},"manage_search")],-1),Z={class:"contenedor-tabla"},ee={class:"contenedor-paginator"};function oe(o,e,s,u,l,n){const m=a("el-input"),c=a("el-col"),b=a("el-row"),h=a("el-collapse-item"),g=a("el-collapse"),f=a("el-table-column"),_=a("el-table"),S=a("el-pagination"),D=a("el-card"),T=a("modal-nuevo"),B=a("modal-modificar"),k=a("modal-eliminar"),I=V("loading");return p(),w(U,null,[i("main",null,[r(D,null,{header:t(()=>[W]),default:t(()=>[i("div",X,[r(g,{modelValue:o.activeNames,"onUpdate:modelValue":e[3]||(e[3]=d=>o.activeNames=d),onChange:o.handleChange},{default:t(()=>[r(h,{title:"Filtros",name:"1"},{title:t(()=>[Y]),default:t(()=>[i("div",null,[r(b,{gutter:10},{default:t(()=>[r(c,{span:8},{default:t(()=>[r(m,{modelValue:l.filtroNombre,"onUpdate:modelValue":e[0]||(e[0]=d=>l.filtroNombre=d),placeholder:"Buscar por nombre",clearable:""},null,8,["modelValue"])]),_:1}),r(c,{span:8},{default:t(()=>[r(m,{modelValue:l.filtroID,"onUpdate:modelValue":e[1]||(e[1]=d=>l.filtroID=d),placeholder:"Buscar por ID",clearable:"",controls:!1,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),r(c,{span:8},{default:t(()=>[r(m,{modelValue:l.filtroCodigo,"onUpdate:modelValue":e[2]||(e[2]=d=>l.filtroCodigo=d),placeholder:"Buscar por c\xF3digo",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})])]),_:1})]),_:1},8,["modelValue","onChange"])]),i("div",Z,[z((p(),x(_,{data:l.rubrosNuevo.slice((l.currentPage-1)*l.pageSize,l.currentPage*l.pageSize),fixed:""},{default:t(()=>[r(f,{label:"Nombre",prop:"nombre"},{default:t(d=>[i("span",null,N(d.row.rubro_nombre),1)]),_:1}),r(f,{label:"ID",prop:"id"},{default:t(d=>[i("span",null,N(d.row.rubro_id),1)]),_:1}),r(f,{label:"C\xF3digo",prop:"codigo"},{default:t(d=>[i("span",null,N(d.row.rubro_codigo),1)]),_:1})]),_:1},8,["data"])),[[I,l.loading]]),i("div",ee,[r(S,{layout:"prev, pager, next, sizes, total, jumper","page-sizes":[10,20,30],"page-size":l.pageSize,total:l.rubros.length,onCurrentChange:n.handleCurrentChange,onSizeChange:n.handleSizeChange,style:{"text-align":"center","margin-top":"1%"}},null,8,["page-size","total","onCurrentChange","onSizeChange"])])])]),_:1})]),r(T,{ref:"modalNuevo",onActualizarTabla:n.obtenerTodos},null,8,["onActualizarTabla"]),r(B,{ref:"modalModificar",onActualizarTabla:n.obtenerTodos},null,8,["onActualizarTabla"]),r(k,{ref:"modalEliminar",onActualizarTabla:n.obtenerTodos},null,8,["onActualizarTabla"])],64)}var le=C(Q,[["render",oe]]);export{le as default};
