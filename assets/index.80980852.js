import{_ as g,r as s,d as f,o as c,c as _,a,w as n,e as m,b as l,F as S,f as D,t as p,g as v}from"./index.ec5771ba.js";const k={data(){return{id:null,loading:!1,datos:null}},methods:{abrir(e){this.loading=!0,this.id=null,this.id=e,this.datos=null,this.$refs.modal.abrir(),this.getDatos()},cerrar(){this.$refs.modal.cerrar()},async getDatos(){await this.axios.get("/api/producto/obtenerDatos/"+this.id).then(e=>{const r=e;console.log(r),r!=null?(this.datos=r.data,console.log(this.datos),this.loading=!1):this.cerrar()})}}};function P(e,r,b,z,t,h){const i=s("el-descriptions"),d=s("modal"),u=f("loading");return c(),_("div",null,[a(d,{ref:"modal",titulo:"Datos del plan","impedir-close":e.impedirClose},{default:n(()=>[m(a(i,{title:"Informaci\xF3n del plan",direction:"vertical",column:4,size:e.size,border:""},null,8,["size"]),[[u,t.loading]])]),_:1},8,["impedir-close"])])}var V=g(k,[["render",P]]);const B={components:{ModalVer:V},data(){return{planes:[],paginas:{},fecha:Date,loading:!1,pageSize:20,currentPage:1}},mounted(){this.obtenerTodos()},methods:{async obtenerTodos(){this.loading=!0,await this.axios.get("/api/plan/obtenerTodos").then(e=>{this.planes=e.data,this.paginas=e.data.pagina,this.fecha=e.data[0].plan_fdesde,console.log("fecha"+this.fecha),console.log(this.planes),console.log(this.paginas)}),this.loading=!1},handleCurrentChange:function(e){this.$data.currentPage=e},handleSizeChange:function(e){this.$data.pageSize=e}}},F=l("h1",null,"Planes",-1),N={class:"contenedor-tabla"},T={key:0},$=v("Activo"),A={key:1},E=v("Inactivo"),I={class:"contenedor-paginator"};function j(e,r,b,z,t,h){const i=s("el-table-column"),d=s("el-tag"),u=s("el-table"),C=s("el-pagination"),x=s("el-card"),y=s("modal-ver"),w=f("loading");return c(),_(S,null,[l("main",null,[a(x,null,{header:n(()=>[F]),default:n(()=>[l("div",N,[m((c(),D(u,{data:t.planes.slice((t.currentPage-1)*t.pageSize,t.currentPage*t.pageSize),fixed:""},{default:n(()=>[a(i,{label:"Nombre",prop:"descripcion"},{default:n(o=>[l("span",null,p(o.row.plan_nombre),1)]),_:1}),a(i,{label:"Fecha inicio",prop:"fincio"},{default:n(o=>[l("span",null,p(o.row.plan_fdesde),1)]),_:1}),a(i,{label:"Fecha fin",prop:"fincio"},{default:n(o=>[l("span",null,p(o.row.plan_fhasta),1)]),_:1}),a(i,{label:"Cant. meses",prop:"fincio"},{default:n(o=>[l("span",null,p(o.row.plan_plazo),1)]),_:1}),a(i,{label:"Estado",prop:"fincio"},{default:n(o=>[o.row.plan_activo==1?(c(),_("span",T,[a(d,{size:"small",type:"success"},{default:n(()=>[$]),_:1})])):(c(),_("span",A,[a(d,{size:"small",type:"danger"},{default:n(()=>[E]),_:1})]))]),_:1})]),_:1},8,["data"])),[[w,t.loading]]),l("div",I,[a(C,{layout:"prev, pager, next, sizes, total, jumper","page-sizes":[10,20,30],"page-size":t.pageSize,total:t.planes.length,onCurrentChange:h.handleCurrentChange,onSizeChange:h.handleSizeChange,style:{"text-align":"center","margin-top":"1%"}},null,8,["page-size","total","onCurrentChange","onSizeChange"])])])]),_:1})]),a(y,{ref:"modalVer"},null,512)],64)}var q=g(B,[["render",j]]);export{q as default};
