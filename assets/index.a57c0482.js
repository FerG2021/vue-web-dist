import{_ as z,r as p,d as G,o as f,c as P,a,w as n,b as l,e as U,f as T,t as h,g as v,E as B,v as q,F,h as N,i as M,p as K,j as Q}from"./index.8bc8b4af.js";const X={data(){return{id:null,indice:null,datosDeposito:[],loading:!1,cantidadTotalDeposito:0,datosSacarDeposito:null,arrayCantidadesDeposito:[]}},methods:{abrir(o,r){this.$refs.modal.abrir(),this.id=o.row.producto_id,this.indice=o.$index,this.datosDeposito=[],this.cantidadTotalDeposito=0,this.datosSacarDeposito=null,console.log(o),console.log("id: "+o.row.producto_id),console.log("indice: "+o.$index),this.arrayCantidadesDeposito=[],this.arrayCantidadesDeposito=r,console.log("arrayCantidadesDepositoRecibido"),console.log(r),this.getDatos()},cerrar(){this.$refs.modal.cerrar()},async getDatos(){this.loading=!0,await this.axios.get("/api/depositoArticulo/obtenerDatos/"+this.id).then(o=>{this.datosDeposito=o.data,console.log("this.datosDeposito"),console.log(this.datosDeposito),console.log("this.arrayCantidadesDeposito en getDatos"),console.log(this.arrayCantidadesDeposito),this.arrayCantidadesDeposito.forEach(r=>{this.datosDeposito.forEach(t=>{r.deposito_id==t.deposito_id&&r.producto_id==t.producto_id&&r.deposito_producto_id==t.deposito_producto_id&&(t.cantidadAUtilizar=r.cantidad_utilizar)})})}),this.loading=!1},sumardatosSacarDeposito(o,r){console.log("row"),console.log(r),console.log("this.arrayCantidadesDeposito"),console.log(this.arrayCantidadesDeposito);let t=0;if(this.arrayCantidadesDeposito.length>0)this.arrayCantidadesDeposito.forEach(e=>{e.deposito_id==r.deposito_id&&e.producto_id==r.producto_id&&(t=1,e.producto_stock=r.producto_stock,e.cantidad_utilizar=o)});else{t=1;let e={deposito_id:r.deposito_id,deposito_producto_id:r.deposito_producto_id,producto_activo:r.producto_activo,producto_id:r.producto_id,producto_nombre:r.producto_nombre,producto_stock:r.producto_stock,producto_unidad:r.producto_unidad,rubro_id:r.rubro_id,cantidad_utilizar:o};this.arrayCantidadesDeposito.push(e)}if(t==0){let e={deposito_id:r.deposito_id,deposito_producto_id:r.deposito_producto_id,producto_activo:r.producto_activo,producto_id:r.producto_id,producto_nombre:r.producto_nombre,producto_stock:r.producto_stock,producto_unidad:r.producto_unidad,rubro_id:r.rubro_id,cantidad_utilizar:o};this.arrayCantidadesDeposito.push(e)}this.cantidadTotalDeposito=this.cantidadTotalDeposito+o,console.log("this.arrayCantidadesDepositoAgregado"),console.log(this.arrayCantidadesDeposito),console.log("this.cantidadTotalDeposito"),console.log(this.cantidadTotalDeposito)},enviarCantidadAUtilizarDeposito(){this.datosSacarDeposito={indice:this.indice,cantidadUsar:this.cantidadTotalDeposito},this.$emit("update:cantidadSacarDeposito",this.datosSacarDeposito),this.cerrar()}}},Z=v(" Agregar ");function oo(o,r,t,e,i,c){const k=p("el-table-column"),x=p("el-input-number"),_=p("el-table"),b=p("el-col"),S=p("el-button"),u=p("el-row"),y=p("modal"),D=G("loading");return f(),P("div",null,[a(y,{ref:"modal",titulo:"Buscar producto en dep\xF3sito","impedir-close":o.impedirClose},{default:n(()=>[l("div",null,[U((f(),T(_,{data:i.datosDeposito,stripe:"",style:{width:"100%"}},{default:n(()=>[a(k,{prop:"date",label:"Dep\xF3sito"},{default:n(I=>[l("span",null,[l("b",null,h(I.row.deposito.deposito_nombre),1)])]),_:1}),a(k,{prop:"date",label:"Producto"},{default:n(I=>[l("span",null,h(I.row.producto_nombre),1)]),_:1}),a(k,{prop:"date",label:"Stock"},{default:n(I=>[l("span",null,h(I.row.producto_stock),1)]),_:1}),a(k,{prop:"cantidadAUtilizar",label:"Cant. a utilizar"},{default:n(I=>[a(x,{modelValue:I.row.cantidadAUtilizar,"onUpdate:modelValue":A=>I.row.cantidadAUtilizar=A,max:I.row.producto_stock,controls:!1,align:"center","text-align":"center",style:{width:"100%"},onChange:A=>c.sumardatosSacarDeposito(I.row.cantidadAUtilizar,I.row)},null,8,["modelValue","onUpdate:modelValue","max","onChange"])]),_:1})]),_:1},8,["data"])),[[D,i.loading]]),a(u,{gutter:10,style:{"margin-top":"15px"}},{default:n(()=>[a(b,{span:3}),a(b,{span:3}),a(b,{span:3}),a(b,{span:3}),a(b,{span:3}),a(b,{span:3}),a(b,{span:2}),a(b,{span:3},{default:n(()=>[a(S,{type:"primary",style:{width:"100%"},onClick:r[0]||(r[0]=I=>c.enviarCantidadAUtilizarDeposito())},{default:n(()=>[Z]),_:1})]),_:1}),a(b,{span:1})]),_:1})])]),_:1},8,["impedir-close"])])}var ro=z(X,[["render",oo]]);const eo={components:{ModalBuscarProductoDeposito:ro},data(){return{form:{nombreObra:null,montoObra:null,fechaObra:null,producto:null,fDesde:null,fHasta:null,cantMeses:null,fechaaPresupuestar:[],mesesaPresupuestar:null,rubroaPresupuestar:null},cargando:!1,loadingDesdeSelectPlan:!1,rubrosSelect:[],active:0,planesSelect:[],datosPlanSeleccionado:[],arrayMeses:[],mostrarFechaIncioPresupuestacion:null,mostrarFechaFinPresupuestacion:null,mostrarCantidadMesesPresupuestacion:null,mostrarRubroPresupuestacion:null,filtroRubro:"",productos:[],productosNuevo:[],arrAuxProductosDesdePrevision:[],productosDesdePrevision:[],productosDesdePrevisionNuevo:[],arrayBuscarProductosEnPrevision:[],productoSeleccionado:null,rubroProductoSeleccionado:null,unidadProductoSeleccionado:null,cantidadAComprarProductoSeleccionado:null,arrayProductosAComprar:[],arrayProductosAComprarEnviar:[],arrayRubrosAComprar:[],b:0,arrayRubrosAComprarEnviar:[],arrayDatosParaCantidadPresupestacion:[],loadingCantidadAComprar:!1,arrayCantidadesDeposito:[],loadingProveedoresParaMail:!1,arrayProveedoresRecibidos:[],arrayProveedoresMostrar:[],arrayProveedoresMostrarEnviar:[],checked2:null,loadingOnSubmitBorrador:!1,loadingOnSubmit:!1,fechaLimiteCarga:null}},created(){this.obtenerPlanesSelect(),this.obtenerRubrosSelect(),this.obtenerProductosSelect()},watch:{filtroRubro(o){o==""?(this.productosDesdePrevisionNuevo=[],this.productosDesdePrevision.forEach(r=>{let t=0;this.productosDesdePrevisionNuevo.forEach(e=>{e.producto_id==r.producto_id&&(t=1)}),t==0&&this.productosDesdePrevisionNuevo.push(r)})):(this.productosDesdePrevisionNuevo=this.buscarRubro(o),console.log("*****productosDesdePrevisionNuevo"),console.log(this.productosDesdePrevisionNuevo))}},methods:{abrir(){this.form.nombreObra=null,this.form.montoObra=null,this.form.fechaObra=null,this.form.producto=null,this.form.fDesde=null,this.form.fHasta=null,this.form.cantMeses=null,this.form.fechaaPresupuestar=[],this.form.mesesaPresupuestar=null,this.form.rubroaPresupuestar=null,this.cargando=!1,this.loadingDesdeSelectPlan=!1,this.active=0,this.planesSelect=[],this.datosPlanSeleccionado=[],this.arrayMeses=[],this.mostrarFechaIncioPresupuestacion=null,this.mostrarFechaFinPresupuestacion=null,this.mostrarCantidadMesesPresupuestacion=null,this.mostrarRubroPresupuestacion=null,this.filtroRubro="",this.arrAuxProductosDesdePrevision=[],this.productosDesdePrevision=[],this.arrayBuscarProductosEnPrevision=[],this.productoSeleccionado=null,this.rubroProductoSeleccionado=null,this.unidadProductoSeleccionado=null,this.cantidadAComprarProductoSeleccionado=null,this.arrayProductosAComprar=[],this.arrayProductosAComprarEnviar=[],this.arrayRubrosAComprar=[],this.b=0,this.arrayRubrosAComprarEnviar=[],this.arrayDatosParaCantidadPresupestacion=[],this.arrayCantidadesDeposito=[],this.fechaLimiteCarga=null,this.arrayProveedoresRecibidos=[],this.arrayProveedoresMostrar=[],this.arrayProveedoresMostrarEnviar=[],this.checked2=null,this.loadingOnSubmitBorrador=!1,this.loadingOnSubmit=!1,this.$refs.modal.abrir(),this.obtenerPlanesSelect()},cerrar(){this.$refs.modal.cerrar()},activar1YRecargar(){this.active=1,console.log("recargar")},buscarRubro(o){return this.productosDesdePrevision.forEach(r=>{let t=0;r.rubro.rubro_id==o&&(this.productosDesdePrevisionNuevo.forEach(e=>{e.producto_id==r.producto_id&&(t=1)}),t==0&&this.productosDesdePrevisionNuevo.push(r))}),this.productosDesdePrevisionNuevo},async obtenerPlanesSelect(){this.cargando=!0,await this.axios.get("/api/plan/obtenerTodosSelect").then(o=>{this.planesSelect=o.data,console.log(this.planesSelect)}),this.cargando=!1},async obtenerRubrosSelect(){await this.axios.get("/api/rubro/obtenerTodosSelect").then(o=>{this.rubrosSelect=o.data})},async obtenerProductosSelect(){await this.axios.get("/api/producto/obtenerTodos").then(o=>{this.productos=this.productosNuevo=o.data.datos})},async tomarValorPlan(o){this.loadingDesdeSelectPlan=!0,await this.axios.get("/api/plan/obtenerDatos/"+o).then(r=>{this.datosPlanSeleccionado=r.data,this.form.fDesde=this.datosPlanSeleccionado.plan_fdesde,this.form.fHasta=this.datosPlanSeleccionado.plan_fhasta,this.form.cantMeses=this.datosPlanSeleccionado.plan_plazo;let t=new Date(2021,8,28);for(let e=0;e<this.form.cantMeses;e++){let i={nombre:t};this.arrayMeses.push(i),t=new Date(t.setMonth(t.getMonth()+1))}console.log(this.datosPlanSeleccionado)}),this.loadingDesdeSelectPlan=!1},tomarValor(o){this.planesSelect.forEach(r=>{r.id==o&&(console.log(r),this.idProducto=r.id,this.nombreProducto=r.descripcion,this.unidadMedidaProducto=r.unidadMedida.nombre,this.categoriaProducto=r.categoria.nombre)})},deshabilitarSelectFechaaPresupuestar(){return this.form.nombreObra==null},seleccionarRubroPresupuestar(){this.filtroRubro!=""?this.rubrosSelect.forEach(r=>{r.rubro_id==this.filtroRubro&&(this.mostrarRubroPresupuestacion=r.rubro_nombre)}):this.mostrarRubroPresupuestacion=null,console.log("this.productosDesdePrevisionNuevo en seleccionarRubroPresupuestar"),console.log(this.productosDesdePrevisionNuevo),console.log("this.productosDesdePrevision en seleccionarRubroPresupuestar"),console.log(this.productosDesdePrevision);let o=!1;if(o=this.arrayRubrosAComprar.filter(r=>r.rubro_id==this.filtroRubro),console.log("yaExisteElemento"),console.log(o),o.length==0){let r=0;this.productosDesdePrevision.forEach(t=>{let e=0;if(t.rubro.rubro_id==this.filtroRubro&&(r=1,this.arrayProductosAComprar.forEach(i=>{i.producto_id==t.producto_id&&(i.cantidadAComprar=i.cantidadAComprar+t.prevision_cantidad,e=1)}),console.log("elementoooooooooo"),console.log(t),e==0)){let i={producto_id:t.producto_id,producto_codigo:t.producto_codigo,producto_nombre:t.producto_nombre,producto_puc:t.producto_puc,producto_fpuc:t.producto_fpuc,producto_unidad:t.producto_unidad,producto_activo:t.producto.producto_activo,rubro_id:t.rubro.rubro_id,rubro_nombre:t.rubro.rubro_nombre,cantidadAComprar:t.prevision_cantidad,cantidadDeposito:null,cantidadRealAComprar:null,observaciones:null};this.arrayProductosAComprar.push(i),console.log("this.arrayProductosAComprar"),console.log(this.arrayProductosAComprar);let c={rubro_id:i.rubro_id,rubro_nombre:i.rubro_nombre};this.b=0;let k=!1;k=this.arrayRubrosAComprar.filter(x=>x.rubro_id==c.rubro_id),console.log("yaExisteElemento"),console.log(k),k.length==0&&this.arrayRubrosAComprar.push(c)}}),r==0&&B({message:"\xA1No hay productos para el rubro seleccionado en el periodo eledigo!",type:"error"})}else B({message:"\xA1El rubro seleccionado ya fue agregado a la presupuestaci\xF3n!",type:"error"})},deshabilitarBtnSiguientePaso1(){return this.form.fechaaPresupuestar.length==0},async cantidadMeses(){let o=this.form.fechaaPresupuestar[1].getMonth()-this.form.fechaaPresupuestar[0].getMonth()+12*(this.form.fechaaPresupuestar[1].getFullYear()-this.form.fechaaPresupuestar[0].getFullYear())+1;this.form.mesesaPresupuestar=o;let r=this.form.fechaaPresupuestar[0].getDate()+"/"+(this.form.fechaaPresupuestar[0].getMonth()+1)+"/"+this.form.fechaaPresupuestar[0].getFullYear(),t=this.form.fechaaPresupuestar[1].getDate()+"/"+(this.form.fechaaPresupuestar[1].getMonth()+1)+"/"+this.form.fechaaPresupuestar[1].getFullYear();this.mostrarFechaIncioPresupuestacion=r,this.mostrarFechaFinPresupuestacion=t,this.mostrarCantidadMesesPresupuestacion=o,this.arrayBuscarProductosEnPrevision=[];let e={plan_id:this.form.nombreObra,fechaDesdePresupuestacion:this.form.fechaaPresupuestar[0],fechaHastaPresupuestacion:this.form.fechaaPresupuestar[1]};this.arrayBuscarProductosEnPrevision.push(e),console.log("this.arrayBuscarProductosEnPrevision"),console.log(this.arrayBuscarProductosEnPrevision);let i={arrayBuscarProductosEnPrevision:JSON.stringify(this.arrayBuscarProductosEnPrevision)};console.log("params"),console.log(i),this.productosDesdePrevision=[],this.productosDesdePrevisionNuevo=[],console.log("this.productosDesdePrevision"),console.log(this.productosDesdePrevision),await this.axios.post("/api/vistaprevision/obtenerDatos",i).then(c=>{this.productosDesdePrevision=this.productosDesdePrevisionNuevo=c.data,console.log("this.productosDesdePrevision"),console.log(this.productosDesdePrevision)})},limpiarFilaProductoSeleccionado(){this.productosDesdePrevisionNuevo=[],this.productoSeleccionado=null,this.rubroProductoSeleccionado=null,this.unidadProductoSeleccionado=null,this.cantidadAComprarProductoSeleccionado=null,this.seleccionarRubroPresupuestar()},deshabilitarSelectRubroaPresupuestar(){return this.form.fechaaPresupuestar.length==0},seleccionarRubroProductoSeleccionado(){this.arrayDatosParaCantidadPresupestacion=[],this.productosNuevo.forEach(o=>{if(o.producto_id==this.productoSeleccionado){console.log("datos del producto seleccionado"),console.log(o),this.rubroProductoSeleccionado=o.rubro.rubro_nombre,this.unidadProductoSeleccionado=o.producto_unidad;let r={fechaDesdePresupuestacion:this.form.fechaaPresupuestar[0],fechaHastaPresupuestacion:this.form.fechaaPresupuestar[1],plan_id:this.form.nombreObra,rubro_id:o.rubro_id,producto_id:o.producto_id,producto_nombre:o.producto_nombre};console.log("fila"),console.log(r),this.arrayDatosParaCantidadPresupestacion.push(r),this.buscarCantidadPrevision(r.producto_id)}})},async buscarCantidadPrevision(o){this.loadingCantidadAComprar=!0,this.productosDesdePrevisionNuevo.forEach(r=>{r.producto_id==o&&(this.cantidadAComprarProductoSeleccionado=r.prevision_cantidad)}),this.loadingCantidadAComprar=!1},agregarProductoAComprar(){if(this.rubroProductoSeleccionado==null||this.rubroProductoSeleccionado==""||this.unidadProductoSeleccionado==null||this.unidadProductoSeleccionado==""||this.cantidadAComprarProductoSeleccionado==null||this.cantidadAComprarProductoSeleccionado==""||this.cantidadAComprarProductoSeleccionado==0)B({message:"\xA1Se deben completar todos los campos!",type:"error"});else{let o=0;this.arrayProductosAComprar.forEach(r=>{r.producto_id==this.productoSeleccionado&&(o=1)}),o==1?(B({message:"\xA1El producto seleccionado ya ha sido agregado!",type:"error"}),this.productoSeleccionado=null,this.rubroProductoSeleccionado=null,this.unidadProductoSeleccionado=null,this.cantidadAComprarProductoSeleccionado=null):this.productosNuevo.forEach(r=>{if(r.producto_id==this.productoSeleccionado){let t={producto_auto:r.producto_auto,producto_id:r.producto_id,producto_codigo:r.producto_codigo,producto_nombre:r.producto_nombre,producto_puc:r.producto_puc,producto_fpuc:r.producto_fpuc,producto_unidad:r.producto_unidad,producto_activo:r.producto_activo,rubro_id:r.rubro_id,rubro_nombre:r.rubro.rubro_nombre,cantidadAComprar:this.cantidadAComprarProductoSeleccionado,cantidadDeposito:null,cantidadRealAComprar:null,observaciones:null};this.arrayProductosAComprar.push(t);let e={rubro_id:t.rubro_id,rubro_nombre:t.rubro_nombre};this.b=0;let i=!1;i=this.arrayRubrosAComprar.filter(c=>c.rubro_id==e.rubro_id),console.log("yaExisteElemento"),console.log(i),i.length==0&&this.arrayRubrosAComprar.push(e),this.productoSeleccionado=null,this.rubroProductoSeleccionado=null,this.unidadProductoSeleccionado=null,this.cantidadAComprarProductoSeleccionado=null}})}},eliminarItemArrayProductosAComprar(o){this.arrayProductosAComprar.splice(o.$index,1),this.verificarRubroProductoSigueExistente(o)},verificarRubroProductoSigueExistente(o){console.log("scope"),console.log(o);let r=0;this.arrayRubrosAComprar.forEach(t=>{let e=0;this.arrayProductosAComprar.forEach(i=>{t.rubro_id==i.rubro_id&&(e=1)}),e==0&&this.arrayRubrosAComprar.splice(r,1),r++})},cantidadSacadaDeposito(o,r){console.log("elemento desde modal"),console.log(o),console.log("arrayCantidadesDeposito"),console.log(r),this.arrayProductosAComprar[o.indice].cantidadAComprar<o.cantidadUsar?B({message:"\xA1Cantidad extra\xEDda de los depositos mayor que la cantidad a presupuestar, por favor seleccione otra cantidad!",type:"error"}):(this.arrayProductosAComprar[o.indice].cantidadDeposito=o.cantidadUsar,this.arrayProductosAComprar[o.indice].cantidadRealAComprar=this.arrayProductosAComprar[o.indice].cantidadAComprar-o.cantidadUsar)},activar2yTraerProveedoresxRubro(){let o=0;this.arrayProductosAComprar.forEach(r=>{(r.cantidadRealAComprar==0||r.cantidadRealAComprar==null||r.cantidadDeposito==null)&&(o=1)}),o==1?B({message:"\xA1Se deben completar la cantidad real y de dep\xF3sito de cada uno de los productos agregados!",type:"error"}):(this.active=2,this.obtenerProveedorxRubro())},async obtenerProveedorxRubro(){this.arrayProveedoresMostrar=[],console.log("array prov al inicio"),console.log(this.arrayProveedoresMostrar),this.loadingProveedoresParaMail=!0,this.arrayRubrosAComprarEnviar=[],this.arrayRubrosAComprar.forEach(r=>{let t={rubro_id:r.rubro_id,rubro_nombre:r.rubro_nombre,rubro_elegido:null};this.arrayRubrosAComprarEnviar.push(t)}),console.log("this.arrayRubrosAComprarEnviar"),console.log(this.arrayRubrosAComprarEnviar);let o={arrRubrosAComprar:JSON.stringify(this.arrayRubrosAComprarEnviar)};await this.axios.post("/api/proveedorxrubro/obtenerProveedorxRubro",o).then(r=>{console.log(r.data),this.arrayProveedoresRecibidos=r.data}),this.arrayRubrosAComprarEnviar.forEach(r=>{this.arrayProveedoresRecibidos.forEach(t=>{if(r.rubro_id==t.rubro_id){let e={rubro:{rubro_id:r.rubro_id,rubro_nombre:r.rubro_nombre},proveedor:t.proveedor,proveedor_elegido:null};this.arrayProveedoresMostrar.push(e)}})}),console.log("this.arrayProveedoresMostrar"),console.log(this.arrayProveedoresMostrar),this.loadingProveedoresParaMail=!1},cambiarSeleccionSubItemsRubroElegido(o){console.log(o),this.arrayProveedoresMostrar.forEach(r=>{r.rubro.rubro_id==o.rubro_id&&(o.rubro_elegido==!0?r.proveedor_elegido=!0:r.proveedor_elegido=!1)})},async onSubmit(){this.loadingOnSubmit=!0;let o={presupuestacion_id:0,presupuestacion_plan_id:this.form.nombreObra,presupuestacion_plan_nombre:this.datosPlanSeleccionado.plan_nombre,presupuestacion_fecha_incio:this.form.fechaaPresupuestar[0],presupuestacion_fecha_fin:this.form.fechaaPresupuestar[1],presupuestacion_fecha_limite:this.fechaLimiteCarga};this.arrayProductosAComprar.forEach(r=>{let t={presupuestacion_producto_id:0,presupuestacion_id:0,presupuestacion_plan_id:this.form.nombreObra,producto_id:r.producto_id,producto_nombre:r.producto_nombre,producto_rubro_id:r.rubro_id,producto_rubro_nombre:r.rubro_nombre,producto_unidad_medida:r.producto_unidad,producto_cantidad_a_comprar:r.cantidadAComprar,producto_cantidad_deposito:r.cantidadDeposito,producto_cantidad_real_a_comprar:r.cantidadRealAComprar,producto_observaciones:r.observaciones};this.arrayProductosAComprarEnviar.push(t)}),o.arrayProductosAComprarEnviar=JSON.stringify(this.arrayProductosAComprarEnviar),this.arrayProveedoresMostrar.forEach(r=>{if(r.proveedor_elegido==!0){let t={presupuestacion_proveedor_id:0,presupuestacion_id:0,presupuestacion_plan_id:this.form.nombreObra,proveedor_id:r.proveedor.proveedor_id,proveedor_nombre:r.proveedor.proveedor_nombre,proveedor_rubro_id:r.rubro.rubro_id,proveedor_mail:r.proveedor.proveedor_email};this.arrayProveedoresMostrarEnviar.push(t)}}),console.log("this.arrayProveedoresMostrarEnviar"),console.log(this.arrayProveedoresMostrarEnviar),o.arrayProveedoresMostrarEnviar=JSON.stringify(this.arrayProveedoresMostrarEnviar),o.arrayRubrosAComprar=JSON.stringify(this.arrayRubrosAComprarEnviar),this.arrayCantidadesDeposito.length>0&&(o.arrTransferencias=JSON.stringify(this.arrayCantidadesDeposito)),await this.axios.post("/api/presupuestacion/crear",o).then(r=>{console.log(r),r.data&&(B({type:"success",message:"\xA1Prespuestaci\xF3n realizada con \xE9xito!"}),this.$emit("actualizarTabla"),this.cerrar())})},async onSubmitBorrador(){this.loadingOnSubmitBorrador=!0;let o={presupuestacion_id:0,presupuestacion_plan_id:this.form.nombreObra,presupuestacion_plan_nombre:this.datosPlanSeleccionado.plan_nombre,presupuestacion_fecha_incio:this.form.fechaaPresupuestar[0],presupuestacion_fecha_fin:this.form.fechaaPresupuestar[1],presupuestacion_fecha_limite:this.fechaLimiteCarga};this.arrayProductosAComprar.forEach(r=>{let t={presupuestacion_producto_id:0,presupuestacion_id:0,presupuestacion_plan_id:this.form.nombreObra,producto_id:r.producto_id,producto_nombre:r.producto_nombre,producto_rubro_id:r.rubro_id,producto_rubro_nombre:r.rubro_nombre,producto_cantidad_a_comprar:r.cantidadAComprar,producto_cantidad_deposito:r.cantidadDeposito,producto_cantidad_real_a_comprar:r.cantidadRealAComprar,producto_observaciones:r.observaciones};this.arrayProductosAComprarEnviar.push(t)}),o.arrayProductosAComprarEnviar=JSON.stringify(this.arrayProductosAComprarEnviar),this.arrayProveedoresMostrar.forEach(r=>{let t={presupuestacion_proveedor_id:0,presupuestacion_id:0,presupuestacion_plan_id:this.form.nombreObra,proveedor_id:r.proveedor.proveedor_id,proveedor_nombre:r.proveedor.proveedor_nombre,proveedor_rubro_id:r.rubro.rubro_id,proveedor_mail:r.proveedor.proveedor_email};this.arrayProveedoresMostrarEnviar.push(t)}),o.arrayProveedoresMostrarEnviar=JSON.stringify(this.arrayProveedoresMostrarEnviar),o.arrayRubrosAComprar=JSON.stringify(this.arrayRubrosAComprarEnviar),this.arrayCantidadesDeposito.length>0&&(o.arrTransferencias=JSON.stringify(this.arrayCantidadesDeposito)),await this.axios.post("/api/borradorpresupuestacion/crear",o).then(r=>{console.log(r),r.data&&(B({type:"success",message:"\xA1Borrador generador con \xE9xito!"}),this.cerrar())})}}},R=o=>(K("data-v-4da877a6"),o=o(),Q(),o),ao={style:{padding:"30px"}},to={class:"contenedorBtnSiguienteAtras"},io=v(" Siguiente "),no={style:{padding:"30px"}},co=R(()=>l("span",null,"Inicio presupuestaci\xF3n",-1)),lo=R(()=>l("span",null,"Fin presupuestaci\xF3n",-1)),so=R(()=>l("span",null,"Cantidad de meses",-1)),uo=R(()=>l("span",null,"Rubro",-1)),po=R(()=>l("span",null,"Producto",-1)),fo=R(()=>l("span",null,"Rubro",-1)),_o=R(()=>l("span",null,"Unidad",-1)),go=R(()=>l("span",null,"Cantidad a comprar",-1)),bo=R(()=>l("span",{style:{color:"white"}},"btn",-1)),ho=v(" + "),mo=R(()=>l("span",{class:"material-icons"},"search",-1)),Po=R(()=>l("span",{class:"material-icons"},"delete",-1)),vo={class:"contenedorBtnSiguienteAtras"},ko=v(" Atr\xE1s "),yo=v(" Siguiente "),Co={style:{padding:"30px"}},Do={key:0,style:{"margin-bottom":"5px"}},xo={class:"contenedorBtnSiguienteAtras"},Io=v(" Atr\xE1s "),Ao=v(" Siguiente "),So={style:{padding:"30px"}},Vo=R(()=>l("h1",{style:{"text-align":"center",margin:"0px"}},[l("u",null,[l("b",null,"Resumen de presupuestaci\xF3n")])],-1)),Fo={class:"block"},Eo=R(()=>l("span",{style:{"margin-right":"10px"},class:"demonstration"},"Fecha l\xEDmite de carga proveedor",-1)),wo=R(()=>l("h3",null,[l("b",null,"Productos")],-1)),Uo={style:{"margin-top":"10px"}},No=v(" Nombre "),To=R(()=>l("span",{style:{"margin-left":"0px"}},"U. medida",-1)),Ro=v(" Cant. a comprar "),Mo=v(" Observaciones "),Bo={key:0,style:{"margin-bottom":"5px"}},Ho={style:{"margin-left":"5px"}},Oo=R(()=>l("h3",null,[l("b",null,"Proveedores")],-1)),$o={style:{"margin-top":"10px"}},zo={key:0,style:{"margin-bottom":"5px"}},Go={key:0},Lo={class:"contenedorBtnSiguienteAtras"},Jo=v(" Atr\xE1s "),jo=v(" Guardar como borrador "),Yo=v(" Guardar ");function qo(o,r,t,e,i,c){const k=p("el-step"),x=p("el-steps"),_=p("el-option"),b=p("el-select"),S=p("el-form-item"),u=p("el-input"),y=p("el-col"),D=p("el-row"),I=p("el-date-picker"),A=p("el-form"),V=p("el-button"),g=p("el-input-number"),s=p("el-table-column"),E=p("el-table"),m=p("el-checkbox"),H=p("el-button-group"),C=p("modal"),$=p("modal-buscar-producto-deposito"),j=G("loading");return f(),P(F,null,[l("div",null,[a(C,{ref:"modal",titulo:"Nueva presupuestaci\xF3n","impedir-close":o.impedirClose,width:"90%"},{default:n(()=>[a(x,{active:i.active,"finish-status":"success",simple:"",style:{"margin-top":"5px","margin-bottom":"5px"}},{default:n(()=>[a(k,{title:"Obra"}),a(k,{title:"Materiales"}),a(k,{title:"Proveedores"}),a(k,{title:"Resumen"})]),_:1},8,["active"]),U(l("div",ao,[a(A,{"label-width":"120px"},{default:n(()=>[a(S,{label:"Nombre obra",prop:"nombreObra"},{default:n(()=>[a(b,{modelValue:i.form.nombreObra,"onUpdate:modelValue":r[0]||(r[0]=d=>i.form.nombreObra=d),placeholder:"Seleccione un plan",style:{width:"100%"},onChange:r[1]||(r[1]=d=>c.tomarValorPlan(i.form.nombreObra))},{default:n(()=>[(f(!0),P(F,null,N(i.planesSelect,d=>(f(),T(_,{key:d.plan_id,label:d.plan_nombre,value:d.plan_id,disabled:d.disabled,style:{width:"100%"}},null,8,["label","value","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(S,{label:"Fecha de obra",style:{width:"100%"}},{default:n(()=>[a(D,{gutter:10,style:{width:"100%"}},{default:n(()=>[a(y,{span:12,style:{width:"100%"}},{default:n(()=>[U(a(u,{style:{width:"100%"},modelValue:i.form.fDesde,"onUpdate:modelValue":r[2]||(r[2]=d=>i.form.fDesde=d),disabled:"",placeholder:"Fecha de inicio"},null,8,["modelValue"]),[[j,i.loadingDesdeSelectPlan]])]),_:1}),a(y,{span:12,style:{width:"100%"}},{default:n(()=>[U(a(u,{style:{width:"100%"},modelValue:i.form.fHasta,"onUpdate:modelValue":r[3]||(r[3]=d=>i.form.fHasta=d),disabled:"",placeholder:"Fecha de fin"},null,8,["modelValue"]),[[j,i.loadingDesdeSelectPlan]])]),_:1})]),_:1})]),_:1}),a(S,{label:"Meses totales"},{default:n(()=>[U(a(u,{style:{width:"100%"},modelValue:i.form.cantMeses,"onUpdate:modelValue":r[4]||(r[4]=d=>i.form.cantMeses=d),disabled:"",placeholder:"Cantidad de meses"},null,8,["modelValue"]),[[j,i.loadingDesdeSelectPlan]])]),_:1}),a(S,{label:"Fecha a presup."},{default:n(()=>[a(I,{modelValue:i.form.fechaaPresupuestar,"onUpdate:modelValue":r[5]||(r[5]=d=>i.form.fechaaPresupuestar=d),type:"monthrange","range-separator":"a","start-placeholder":"Mes de inicio","end-placeholder":"Mes de fin",style:{width:"100%"},onChange:r[6]||(r[6]=d=>c.cantidadMeses()),disabled:c.deshabilitarSelectFechaaPresupuestar()},null,8,["modelValue","disabled"])]),_:1}),a(S,{label:"Meses a presup."},{default:n(()=>[a(u,{style:{width:"100%"},modelValue:i.form.mesesaPresupuestar,"onUpdate:modelValue":r[7]||(r[7]=d=>i.form.mesesaPresupuestar=d),disabled:"",placeholder:"Cantidad de meses"},null,8,["modelValue"])]),_:1}),a(S,{label:"Rubro a presup."},{default:n(()=>[i.form.fechaaPresupuestar.length!=0?(f(),T(b,{key:0,modelValue:i.filtroRubro,"onUpdate:modelValue":r[8]||(r[8]=d=>i.filtroRubro=d),placeholder:"Seleccionar por rubro",filterable:"",clearable:"",style:{width:"100%"},onChange:r[9]||(r[9]=d=>c.limpiarFilaProductoSeleccionado())},{default:n(()=>[(f(!0),P(F,null,N(i.rubrosSelect,d=>(f(),T(_,{key:d.rubro_id,label:d.rubro_nombre,value:d.rubro_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):M("",!0)]),_:1})]),_:1}),l("div",to,[a(V,{type:"primary",class:"btnSiguiente",disabled:c.deshabilitarBtnSiguientePaso1(),onClick:r[10]||(r[10]=d=>c.activar1YRecargar())},{default:n(()=>[io]),_:1},8,["disabled"])])],512),[[q,i.active==0]]),U(l("div",no,[a(D,{gutter:10},{default:n(()=>[a(y,{span:6},{default:n(()=>[co,a(u,{modelValue:i.mostrarFechaIncioPresupuestacion,"onUpdate:modelValue":r[11]||(r[11]=d=>i.mostrarFechaIncioPresupuestacion=d),disabled:""},null,8,["modelValue"])]),_:1}),a(y,{span:6},{default:n(()=>[lo,a(u,{modelValue:i.mostrarFechaFinPresupuestacion,"onUpdate:modelValue":r[12]||(r[12]=d=>i.mostrarFechaFinPresupuestacion=d),disabled:""},null,8,["modelValue"])]),_:1}),a(y,{span:6},{default:n(()=>[so,a(u,{modelValue:i.mostrarCantidadMesesPresupuestacion,"onUpdate:modelValue":r[13]||(r[13]=d=>i.mostrarCantidadMesesPresupuestacion=d),disabled:""},null,8,["modelValue"])]),_:1}),a(y,{span:6},{default:n(()=>[uo,a(u,{modelValue:i.mostrarRubroPresupuestacion,"onUpdate:modelValue":r[14]||(r[14]=d=>i.mostrarRubroPresupuestacion=d),disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),a(D,{gutter:10,style:{"margin-top":"15px"}},{default:n(()=>[a(y,{span:10},{default:n(()=>[po,a(b,{modelValue:i.productoSeleccionado,"onUpdate:modelValue":r[15]||(r[15]=d=>i.productoSeleccionado=d),placeholder:"Seleccionar producto",filterable:"",clearable:"",style:{width:"100%"},onChange:r[16]||(r[16]=d=>c.seleccionarRubroProductoSeleccionado())},{default:n(()=>[(f(!0),P(F,null,N(i.productosDesdePrevisionNuevo,d=>(f(),T(_,{key:d.producto_id,label:d.producto_nombre,value:d.producto_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(y,{span:6},{default:n(()=>[fo,a(u,{modelValue:i.rubroProductoSeleccionado,"onUpdate:modelValue":r[17]||(r[17]=d=>i.rubroProductoSeleccionado=d),disabled:"",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),a(y,{span:2},{default:n(()=>[_o,a(u,{modelValue:i.unidadProductoSeleccionado,"onUpdate:modelValue":r[18]||(r[18]=d=>i.unidadProductoSeleccionado=d),disabled:"",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),a(y,{span:4},{default:n(()=>[go,U(a(g,{modelValue:i.cantidadAComprarProductoSeleccionado,"onUpdate:modelValue":r[19]||(r[19]=d=>i.cantidadAComprarProductoSeleccionado=d),controls:!1,style:{width:"100%"}},null,8,["modelValue"]),[[j,i.loadingCantidadAComprar]])]),_:1}),a(y,{span:2},{default:n(()=>[bo,a(V,{type:"primary",style:{width:"100%"},onClick:r[20]||(r[20]=d=>c.agregarProductoAComprar())},{default:n(()=>[ho]),_:1})]),_:1})]),_:1}),a(E,{data:i.arrayProductosAComprar,stripe:"",style:{width:"100%"}},{default:n(()=>[a(s,{prop:"nombre",label:"Nombre"},{default:n(d=>[l("span",null,h(d.row.producto_nombre),1)]),_:1}),a(s,{prop:"codigo",label:"C\xF3digo",width:"120px"},{default:n(d=>[l("span",null,h(d.row.producto_codigo),1)]),_:1}),a(s,{prop:"unidad",label:"Unidad",width:"120px"},{default:n(d=>[l("span",null,h(d.row.producto_unidad),1)]),_:1}),a(s,{prop:"rubro",label:"Rubro",width:"120px"},{default:n(d=>[l("span",null,h(d.row.rubro_nombre),1)]),_:1}),a(s,{prop:"cantidad",label:"Cant. a comp.",width:"120px"},{default:n(d=>[l("span",null,h(d.row.cantidadAComprar),1)]),_:1}),a(s,{prop:"cantidadDeposito",label:"Cant. dep\xF3sito",width:"120px"},{default:n(d=>[l("span",null,h(d.row.cantidadDeposito),1)]),_:1}),a(s,{prop:"cantidadDeposito",label:"",width:"70"},{default:n(d=>[a(V,{type:"primary",style:{width:"10%","margin-bottom":"3px","margin-left":"3px"},onClick:O=>o.$refs.modalBuscarProductoDeposito.abrir(d,i.arrayCantidadesDeposito)},{default:n(()=>[mo]),_:2},1032,["onClick"])]),_:1}),a(s,{prop:"cantidadReal",label:"Cant. real a comprar",width:"120px"},{default:n(d=>[a(g,{modelValue:d.row.cantidadRealAComprar,"onUpdate:modelValue":O=>d.row.cantidadRealAComprar=O,max:d.row.cantidadAComprar,controls:!1,align:"center","text-align":"center",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue","max"])]),_:1}),a(s,{prop:"observaciones",label:"Observaciones",width:"120px"},{default:n(d=>[a(u,{modelValue:d.row.observaciones,"onUpdate:modelValue":O=>d.row.observaciones=O,align:"center","text-align":"center",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(s,{label:"Eliminar",width:"120",align:"center","text-align":"center"},{default:n(d=>[a(V,{type:"danger",circle:"",onClick:O=>c.eliminarItemArrayProductosAComprar(d)},{default:n(()=>[Po]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l("div",vo,[a(V,{type:"info",class:"btnAtras",onClick:r[21]||(r[21]=d=>i.active=0)},{default:n(()=>[ko]),_:1}),a(V,{type:"primary",class:"btnSiguiente",onClick:r[22]||(r[22]=d=>c.activar2yTraerProveedoresxRubro())},{default:n(()=>[yo]),_:1})])],512),[[q,i.active==1]]),U((f(),P("div",Co,[(f(!0),P(F,null,N(i.arrayRubrosAComprar,(d,O)=>(f(),P("div",{key:O},[a(m,{modelValue:d.rubro_elegido,"onUpdate:modelValue":w=>d.rubro_elegido=w,onChange:w=>c.cambiarSeleccionSubItemsRubroElegido(d)},{default:n(()=>[l("h3",null,[l("b",null,h(d.rubro_nombre),1)])]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]),(f(!0),P(F,null,N(i.arrayProveedoresMostrar,(w,Y)=>(f(),P("div",{key:Y},[w.rubro.rubro_id==d.rubro_id?(f(),P("div",Do,[a(m,{modelValue:w.proveedor_elegido,"onUpdate:modelValue":W=>w.proveedor_elegido=W,size:"large",border:""},{default:n(()=>[v(h(w.proveedor.proveedor_nombre)+" - "+h(w.proveedor.proveedor_email),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])])):M("",!0)]))),128))]))),128)),l("div",xo,[a(V,{type:"info",class:"btnAtras",onClick:r[23]||(r[23]=d=>i.active=1)},{default:n(()=>[Io]),_:1}),a(V,{type:"primary",class:"btnSiguiente",onClick:r[24]||(r[24]=d=>i.active=3)},{default:n(()=>[Ao]),_:1})])])),[[q,i.active==2],[j,i.loadingProveedoresParaMail]]),U(l("div",So,[Vo,a(D,null,{default:n(()=>[a(y,{span:12},{default:n(()=>[l("div",Fo,[Eo,a(I,{modelValue:i.fechaLimiteCarga,"onUpdate:modelValue":r[25]||(r[25]=d=>i.fechaLimiteCarga=d),type:"date",placeholder:"Ingrese la fecha l\xEDmite",size:o.size},null,8,["modelValue","size"])])]),_:1})]),_:1}),a(D,{gutter:10,style:{"margin-top":"10px"}},{default:n(()=>[a(y,{span:12},{default:n(()=>[wo,(f(!0),P(F,null,N(i.arrayRubrosAComprar,(d,O)=>(f(),P("div",{key:O},[l("h4",Uo,[l("b",null,h(d.rubro_nombre),1)]),a(D,null,{default:n(()=>[a(y,{span:11},{default:n(()=>[No]),_:1}),a(y,{span:3},{default:n(()=>[To]),_:1}),a(y,{span:4},{default:n(()=>[Ro]),_:1}),a(y,{span:5},{default:n(()=>[Mo]),_:1})]),_:1}),(f(!0),P(F,null,N(i.arrayProductosAComprar,(w,Y)=>(f(),P("div",{key:Y},[l("ul",null,[w.rubro_id==d.rubro_id?(f(),P("div",Bo,[l("li",null,[a(D,null,{default:n(()=>[a(y,{span:11},{default:n(()=>[v(h(w.producto_nombre),1)]),_:2},1024),a(y,{span:3},{default:n(()=>[v(h(w.producto_unidad),1)]),_:2},1024),a(y,{span:4},{default:n(()=>[l("span",Ho,h(w.cantidadRealAComprar),1)]),_:2},1024),a(y,{span:5},{default:n(()=>[v(h(w.observaciones),1)]),_:2},1024)]),_:2},1024)])])):M("",!0)])]))),128))]))),128))]),_:1}),a(y,{span:12},{default:n(()=>[Oo,(f(!0),P(F,null,N(i.arrayRubrosAComprar,(d,O)=>(f(),P("div",{key:O},[l("h4",$o,[l("b",null,h(d.rubro_nombre),1)]),(f(!0),P(F,null,N(i.arrayProveedoresMostrar,(w,Y)=>(f(),P("div",{key:Y},[l("ul",null,[w.rubro.rubro_id==d.rubro_id?(f(),P("div",zo,[w.proveedor_elegido==!0?(f(),P("div",Go,[l("li",null,[a(D,null,{default:n(()=>[a(y,{span:12},{default:n(()=>[v(h(w.proveedor.proveedor_nombre),1)]),_:2},1024),a(y,{span:12},{default:n(()=>[v(h(w.proveedor.proveedor_email),1)]),_:2},1024)]),_:2},1024)])])):M("",!0)])):M("",!0)])]))),128))]))),128))]),_:1})]),_:1}),l("div",Lo,[a(V,{type:"info",class:"btnAtras",onClick:r[26]||(r[26]=d=>i.active=2)},{default:n(()=>[Jo]),_:1}),a(H,{class:"btnSiguiente"},{default:n(()=>[a(V,{type:"primary",onClick:c.onSubmitBorrador,loading:i.loadingOnSubmitBorrador},{default:n(()=>[jo]),_:1},8,["onClick","loading"]),a(V,{type:"success",onClick:c.onSubmit,loading:i.loadingOnSubmit},{default:n(()=>[Yo]),_:1},8,["onClick","loading"])]),_:1})])],512),[[q,i.active==3]])]),_:1},8,["impedir-close"])]),a($,{ref:"modalBuscarProductoDeposito","onUpdate:cantidadSacarDeposito":r[27]||(r[27]=d=>c.cantidadSacadaDeposito(d,i.arrayCantidadesDeposito))},null,512)],64)}var Ko=z(eo,[["render",qo],["__scopeId","data-v-4da877a6"]]);const Qo={data(){return{id:null,loading:!1,loadingProductos:!1,loadingProveedores:!1,datos:null,datosProductos:[],datosProveedores:[]}},methods:{abrir(o){this.loading=!0,this.loadingProductos=!0,this.loadingProveedores=!0,this.id=null,this.id=o,this.datos=null,this.datosProductos=[],this.datosProveedores=[],this.$refs.modal.abrir(),this.getDatos()},cerrar(){this.$refs.modal.cerrar()},async getDatos(){await this.axios.get("/api/presupuestacion/obtenerDatos/"+this.id).then(o=>{const r=o;console.log(r),r!=null?(this.datos=r.data,console.log(this.datos),this.loading=!1,this.datosProductos=r.data.productos,this.loadingProductos=!1,console.log("this.datosProductos"),console.log(this.datosProductos),this.datosProveedores=r.data.proveedores,this.loadingProveedores=!1):this.cerrar()})},formatearFecha(o){return new Date(o).toLocaleDateString()}}},Wo={key:0},Xo=l("h3",{style:{"margin-top":"15px"}},[l("b",null,"Productos")],-1),Zo={key:0},or={key:0},rr={key:1},er=l("h3",{style:{"margin-top":"15px"}},[l("b",null,"Proveedores")],-1),ar={key:1};function tr(o,r,t,e,i,c){const k=p("el-descriptions-item"),x=p("el-tag"),_=p("el-descriptions"),b=p("el-table-column"),S=p("el-table"),u=p("modal"),y=G("loading");return f(),P("div",null,[a(u,{ref:"modal",titulo:"Detalle de la presupuestaci\xF3n","impedir-close":o.impedirClose,width:"90%"},{default:n(()=>[U((f(),T(_,{title:"Informaci\xF3n de la presupuestaci\xF3n",direction:"vertical",column:3,size:o.size,border:""},{default:n(()=>[i.datos!=null?(f(),P("div",Wo,[a(k,{label:"Nro. presupuestaci\xF3n"},{default:n(()=>[v(h(i.datos.presupuestacion_id),1)]),_:1}),a(k,{label:"Fecha de creaci\xF3n"},{default:n(()=>[v(h(c.formatearFecha(i.datos.presupuesto_fecha_creacion)),1)]),_:1}),a(k,{label:"Plan"},{default:n(()=>[v(h(i.datos.presupuestacion_plan_nombre),1)]),_:1}),a(k,{label:"Incio de presupuestaci\xF3n"},{default:n(()=>[v(h(c.formatearFecha(i.datos.presupuestacion_fecha_incio)),1)]),_:1}),a(k,{label:"Fin de presupuestaci\xF3n"},{default:n(()=>[v(h(c.formatearFecha(i.datos.presupuestacion_fecha_fin)),1)]),_:1}),a(k,{label:"Rubro"},{default:n(()=>[a(x,{class:"ml-2",type:"success"},{default:n(()=>[v(h(i.datos.presupuestacion_rubro_nombre),1)]),_:1})]),_:1})])):M("",!0)]),_:1},8,["size"])),[[y,i.loading]]),Xo,i.datosProductos?(f(),P("div",Zo,[U((f(),T(S,{data:i.datosProductos,stripe:"",style:{width:"100%"}},{default:n(()=>[a(b,{prop:"nombre",label:"Nombre"},{default:n(D=>[l("span",null,h(D.row.productoPresupuestacion.producto_nombre),1)]),_:1}),a(b,{prop:"nombre",label:"Rubro"},{default:n(D=>[l("span",null,h(D.row.productoPresupuestacion.producto_rubro_nombre),1)]),_:1}),a(b,{prop:"nombre",label:"Unidad"},{default:n(D=>[l("span",null,h(D.row.producto.producto_unidad),1)]),_:1}),a(b,{prop:"cantidad",label:"Cantidad a comprar"},{default:n(D=>[l("span",null,h(D.row.productoPresupuestacion.producto_cantidad_a_comprar),1)]),_:1}),a(b,{prop:"observaciones",label:"Observaciones"},{default:n(D=>[D.row.productoPresupuestacion.producto_observaciones?(f(),P("span",or,h(D.row.productoPresupuestacion.producto_observaciones),1)):(f(),P("span",rr,"-"))]),_:1})]),_:1},8,["data"])),[[y,i.loadingProductos]])])):M("",!0),er,i.datosProveedores?(f(),P("div",ar,[U((f(),T(S,{data:i.datosProveedores,stripe:"",style:{width:"100%"}},{default:n(()=>[a(b,{prop:"nombre",label:"Nombre"},{default:n(D=>[l("span",null,h(D.row.proveedor_nombre),1)]),_:1}),a(b,{prop:"nombre",label:"Mail"},{default:n(D=>[l("span",null,h(D.row.proveedor_mail),1)]),_:1})]),_:1},8,["data"])),[[y,i.loadingProductos]])])):M("",!0)]),_:1},8,["impedir-close"])])}var ir=z(Qo,[["render",tr]]);const nr={data(){return{idProveedor:null,idPresupuestacion:null,arrayInformacionParaCarga:[],datosGenerales:null,datosProductos:[],datosProveedor:null,arrayInformacionParaCarga:[],arrayProductosDesdeAPI:[],loadingDatosProveedor:!1,loadingArrayInformacionParaCarga:!1,totalPP:0,precioFlete:null,facturaA:null,montoIVA:0,disabledEmiteFactura:!0,arrayCondicionesPago:[],condicionpago:null,descuentosyBonificaciones:null,totalHomogeneo:null,loadingBtnGuardar:!1,diaPago:null,diaPagoSinFormatear:null,opcionesFacturaA:[{value:"1",label:"Si"},{value:"0",label:"No"}]}},methods:{abrir(o,r){this.loadingDatosProveedor=!0,this.loadingArrayInformacionParaCarga=!0,this.idProveedor=null,this.idProveedor=o,this.idPresupuestacion=null,this.idPresupuestacion=r,this.arrayInformacionParaCarga=[],this.datosGenerales=null,this.datosProductos=[],this.datosProveedor=null,this.arrayInformacionParaCarga=[],this.arrayProductosDesdeAPI=[],this.totalPP=0,this.precioFlete=null,this.facturaA=null,this.montoIVA=0,this.disabledEmiteFactura=!0,this.arrayCondicionesPago=[],this.condicionpago=null,this.descuentosyBonificaciones=null,this.totalHomogeneo=null,this.diaPago=null,this.diaPagoSinFormatear=null,console.log("this.idProveedor"),console.log(this.idProveedor),console.log("this.idPresupuestacion"),console.log(this.idPresupuestacion),this.loadingBtnGuardar=!1,this.$refs.modal.abrir(),this.getCondicionesPago(),this.getDatos()},cerrar(){this.$refs.modal.cerrar()},async getDatos(){await this.axios.get("/api/presupuestacion/obtenerDatos/"+this.idPresupuestacion).then(o=>{const r=o;if(r!=null){this.datosGenerales=r.data,console.log("this.datosGenerales"),console.log(this.datosGenerales),this.datosProductos=r.data.productos,console.log("this.datosProductos"),console.log(this.datosProductos);let t=[];t=r.data.proveedores,console.log("proveedoresApi"),console.log(t),t.forEach(e=>{if(this.idProveedor==e.proveedor_id){let i={presupuestacion_id:e.presupuestacion_id,presupuestacion_plan_id:e.presupuestacion_plan_id,presupuestacion_proveedor_id:e.presupuestacion_proveedor_id,proveedor_id:e.proveedor_id,proveedor_mail:e.proveedor_mail,proveedor_nombre:e.proveedor_nombre,proveedor_rubro_id:e.proveedor_rubro_id};this.datosProveedor=i}}),console.log("this.datosProveedor"),console.log(this.datosProveedor),this.loadingDatosProveedor=!1,this.mostrarInformacionParaCargar()}else this.cerrar()})},async getCondicionesPago(){await this.axios.get("/api/condicionpago/obtenerTodos").then(o=>{const r=o;this.arrayCondicionesPago=r.data,console.log("this.arrayCondicionesPago"),console.log(this.arrayCondicionesPago)})},mostrarInformacionParaCargar(){this.datosProductos.forEach(o=>{let r={presupuestacion_productos_proveedores_id:0,presupuestacion_plan_id:this.datosGenerales.presupuestacion_plan_id,presupuestacion_id:this.datosGenerales.presupuestacion_id,presupuestacion_producto_id:o.productoPresupuestacion.presupuestacion_producto_id,presupuestacion_rubro_id:this.datosGenerales.presupuestacion_rubro_id,presupuestacion_rubro_nombre:this.datosGenerales.presupuestacion_rubro_nombre,proveedor_id:this.datosProveedor.proveedor_id,proveedor_nombre:this.datosProveedor.proveedor_nombre,proveedor_mail:this.datosProveedor.proveedor_mail,producto_id:o.productoPresupuestacion.producto_id,producto_nombre:o.productoPresupuestacion.producto_nombre,producto_cantidad_a_comprar:o.productoPresupuestacion.producto_cantidad_a_comprar,precio_png:o.productoPresupuestacion.precio_png,factor:1,cantidad_proveedor:o.productoPresupuestacion.producto_cantidad_a_comprar,iva:21,total_iva:null,precio_pu:o.productoPresupuestacion.precio_pu,precio_pp:o.productoPresupuestacion.precio_pp,ya_agregado:0};this.arrayInformacionParaCarga.push(r)}),console.log("this.arrayInformacionParaCarga"),console.log(this.arrayInformacionParaCarga),this.completarArrayConProductosAgregados()},async completarArrayConProductosAgregados(){let o={idPresupuestacion:this.idPresupuestacion,idProveedor:this.idProveedor};await this.axios.post("/api/presupuestacionproductosproveedor/obtenerTodosDatos",o).then(r=>{console.log("response.data*********"),console.log(r.data),this.arrayProductosDesdeAPI=r.data.productoProveedor,this.totalPP=r.data.presupuestacionProveedorDB.proveedor_monto_totalPP,this.precioFlete=r.data.presupuestacionProveedorDB.proveedor_monto_flete,r.data.presupuestacionProveedorDB.proveedor_factura_A==1?this.facturaA="Si":this.facturaA="No",r.data.presupuestacionProveedorDB.proveedor_monto_factura_A==null?this.montoIVA=0:this.montoIVA=r.data.presupuestacionProveedorDB.proveedor_monto_factura_A,this.arrayCondicionesPago.forEach(t=>{t.condicionpago_id==r.data.presupuestacionProveedorDB.proveedor_forma_de_pago&&(this.condicionpago=t.condicionpago_nombre)}),this.descuentosyBonificaciones=r.data.presupuestacionProveedorDB.proveedor_monto_descuentos_bonificaciones,this.totalHomogeneo=r.data.presupuestacionProveedorDB.proveedor_monto_total_homogeneo}),this.arrayInformacionParaCarga.forEach(r=>{this.arrayProductosDesdeAPI.forEach(t=>{r.presupuestacion_producto_id==t.presupuestacion_producto_id&&r.proveedor_id==t.proveedor_id&&(r.presupuestacion_productos_proveedores_id=t.presupuestacion_productos_proveedores_id,r.presupuestacion_productos_proveedores_id=t.presupuestacion_productos_proveedores_id,r.presupuestacion_producto_id=t.presupuestacion_producto_id,r.presupuestacion_id=t.presupuestacion_id,r.presupuestacion_plan_id=t.presupuestacion_plan_id,r.presupuestacion_rubro_id=t.presupuestacion_rubro_id,r.presupuestacion_rubro_nombre=t.presupuestacion_rubro_nombre,r.proveedor_id=t.proveedor_id,r.proveedor_nombre=t.proveedor_nombre,r.proveedor_mail=t.proveedor_mail,r.producto_id=t.producto_id,r.producto_nombre=t.producto_nombre,r.producto_cantidad_real_a_comprar=t.producto_cantidad_a_comprar,r.factor=t.factor,r.cantidad_proveedor=t.cantidad_proveedor,r.precio_png=t.precio_png,r.iva=t.iva,r.total_iva=t.total_iva,r.precio_pu=t.precio_pu,r.precio_pp=t.precio_pp,r.ya_agregado=1)})}),console.log("this.arrayInformacionParaCarga despues de API"),console.log(this.arrayInformacionParaCarga),this.loadingArrayInformacionParaCarga=!1},getSummaries(o){console.log("param de getSummaries"),console.log(o),this.$refs.tablaComparativa;const r=[];let t=8;r[t]=0;let e=0;return this.arrayInformacionParaCarga.forEach((i,c)=>{c==0&&(r[c]="Total"),e=Number(r[t])+Number(i.total_iva),r[t]=e.toFixed(2)}),console.log("sums"),console.log(r),r},cambiarCantidadProveedor(o){console.log("cambia"),console.log("props"),console.log(o),this.arrayInformacionParaCarga[o.$index].cantidad_proveedor=this.arrayInformacionParaCarga[o.$index].producto_cantidad_a_comprar*this.arrayInformacionParaCarga[o.$index].factor,this.calcularPrecioPP(o)},calcularPrecioPP(o){if(console.log("Calcular precio"),console.log(o.$index),console.log(o.row),this.arrayInformacionParaCarga[o.$index].iva!=null&&this.arrayInformacionParaCarga[o.$index].precio_png!=null){let t=parseFloat(this.arrayInformacionParaCarga[o.$index].iva)*.01;console.log("porcentaje"),console.log(t);let e=parseFloat(t*this.arrayInformacionParaCarga[o.$index].precio_png);console.log("precioParcial"),console.log(e),this.arrayInformacionParaCarga[o.$index].total_iva=e.toFixed(2);let c=(parseFloat(this.arrayInformacionParaCarga[o.$index].precio_png)+e).toFixed(2);console.log("precio_pu"),console.log(c),this.arrayInformacionParaCarga[o.$index].precio_pu=c,console.log("this.arrayInformacionParaCarga[props.$index].precio_pu"),console.log(this.arrayInformacionParaCarga[o.$index].precio_pu),this.arrayInformacionParaCarga[o.$index].precio_pp=this.arrayInformacionParaCarga[o.$index].precio_pu*this.arrayInformacionParaCarga[o.$index].cantidad_proveedor;let k=this.arrayInformacionParaCarga[o.$index].precio_pp;this.arrayInformacionParaCarga[o.$index].precio_pp=k.toFixed(2),this.sumarPP(o),this.calcularMontoIVA(o)}},calcularMontoIVA(o){console.log("props de monto iva"),console.log(o)},sumarPP(o){this.totalPP=0,console.log("ejecuta sumarPP"),this.arrayInformacionParaCarga.forEach(t=>{console.log("elemento.precio_pp"),console.log(t.precio_pp),t.precio_pp!=null&&(this.totalPP=this.totalPP+parseFloat(t.precio_pp))});let r=this.totalPP.toFixed(2);console.log("total"),console.log(r),this.totalPP=r,console.log(this.totalPP),this.calcularTotalHomegeno()},cambiarDisabledEmiteFactura(){console.log("emite factura"),this.facturaA==0||this.facturaA==="No"?this.disabledEmiteFactura=!1:(this.facturaA==1||this.facturaA=="Si")&&(this.disabledEmiteFactura=!0,this.montoIVA=0,this.calcularTotalHomegeno())},calcularTotalHomegeno(){console.log("this.totalPP"),console.log(parseFloat(this.totalPP)),console.log("this.precioFlete"),console.log(parseFloat(this.precioFlete)),console.log("this.descuentosyBonificaciones"),console.log(parseFloat(this.descuentosyBonificaciones));let o=parseFloat(this.totalPP)+parseFloat(this.precioFlete)+parseFloat(this.descuentosyBonificaciones)+parseFloat(this.montoIVA);this.totalHomogeneo=o.toFixed(2)},cambiaCondicionPago(){console.log("cambia condicion pago"),console.log("this.condicionpago"),console.log(this.condicionpago);let o=null;o=new Date,console.log("date"),console.log(o),console.log(o.setDate(o.getDate()));let r=Date();if(r=o.setDate(o.getDate()+180),console.log("nuevoDate"),console.log(r),this.condicionpago==39){let t=this.formatearFecha(o.setDate(o.getDate()+180));console.log("date dentro"),console.log(o.setDate(o.getDate()+180)),console.log("nuevoDate"),console.log(t),this.diaPago=t}if(this.condicionpago==26){let t=this.formatearFecha(o.setDate(o.getDate()+30));console.log("nuevoDate"),console.log(t),this.diaPago=t}if(this.condicionpago==25){let t=this.formatearFecha(o.setDate(o.getDate()+60));console.log("nuevoDate"),console.log(t),this.diaPago=t}if(this.condicionpago==30){let t=this.formatearFecha(o.setDate(o.getDate()+45));console.log("nuevoDate"),console.log(t),this.diaPago=t}if(this.condicionpago==17){let t=this.formatearFecha(o.setDate(o.getDate()+10));this.diaPagoSinFormatear=o.setDate(o.getDate()+10),console.log("nuevoDate"),console.log(t),this.diaPago=t}if(this.condicionpago==20){let t=this.formatearFecha(o.setDate(o.getDate()+20));this.diaPagoSinFormatear=o.setDate(o.getDate()+20),console.log("nuevoDate"),console.log(t),this.diaPago=t}if(this.condicionpago==18){let t=this.formatearFecha(o.setDate(o.getDate()+30));this.diaPagoSinFormatear=o.setDate(o.getDate()+30),console.log("nuevoDate"),console.log(t),this.diaPago=t}if(this.condicionpago==34){let t=this.formatearFecha(o.setDate(o.getDate()+75));this.diaPagoSinFormatear=o.setDate(o.getDate()+75),console.log("nuevoDate"),console.log(t),this.diaPago=t}if(this.condicionpago==24){let t=this.formatearFecha(o.setDate(o.getDate()+75));this.diaPagoSinFormatear=o.setDate(o.getDate()+75),console.log("nuevoDate"),console.log(t),this.diaPago=t}if(this.condicionpago==19){let t=this.formatearFecha(o.setDate(o.getDate()+45));this.diaPagoSinFormatear=o.setDate(o.getDate()+75),console.log("nuevoDate"),console.log(t),this.diaPago=t}if(this.condicionpago==22){let t=this.formatearFecha(o.setDate(o.getDate()+30));this.diaPagoSinFormatear=o.setDate(o.getDate()+30),console.log("nuevoDate"),console.log(t),this.diaPago=t}if(this.condicionpago==10){let t=this.formatearFecha(o.setDate(o.getDate()+60));this.diaPagoSinFormatear=o.setDate(o.getDate()+60),console.log("nuevoDate"),console.log(t),this.diaPago=t}if(this.condicionpago==27){let t=this.formatearFecha(o.setDate(o.getDate()+45));this.diaPagoSinFormatear=o.setDate(o.getDate()+45),console.log("nuevoDate"),console.log(t),this.diaPago=t}if(this.condicionpago==16){let t=this.formatearFecha(o.setDate(o.getDate()+60));this.diaPagoSinFormatear=o.setDate(o.getDate()+60),console.log("nuevoDate"),console.log(t),this.diaPago=t}if(this.condicionpago==36){let t=this.formatearFecha(o.setDate(o.getDate()+105));this.diaPagoSinFormatear=o.setDate(o.getDate()+105),console.log("nuevoDate"),console.log(t),this.diaPago=t}if(this.condicionpago==14){let t=this.formatearFecha(o.setDate(o.getDate()+90));this.diaPagoSinFormatear=o.setDate(o.getDate()+90),console.log("nuevoDate"),console.log(t),this.diaPago=t}if(this.condicionpago==28){let t=this.formatearFecha(o.setDate(o.getDate()+60));this.diaPagoSinFormatear=o.setDate(o.getDate()+60),console.log("nuevoDate"),console.log(t),this.diaPago=t}if(this.condicionpago==37){let t=this.formatearFecha(o.setDate(o.getDate()+90));this.diaPagoSinFormatear=o.setDate(o.getDate()+90),console.log("nuevoDate"),console.log(t),this.diaPago=t}if(this.condicionpago==38){let t=this.formatearFecha(o.setDate(o.getDate()+120));this.diaPagoSinFormatear=o.setDate(o.getDate()+120),console.log("nuevoDate"),console.log(t),this.diaPago=t}if(this.condicionpago==12){let t=this.formatearFecha(o.setDate(o.getDate()+90));this.diaPagoSinFormatear=o.setDate(o.getDate()+90),console.log("nuevoDate"),console.log(t),this.diaPago=t}if(this.condicionpago==23){let t=this.formatearFecha(o.setDate(o.getDate()+1));this.diaPagoSinFormatear=o.setDate(o.getDate()+1),console.log("nuevoDate"),console.log(t),this.diaPago=t}if(this.condicionpago==32){let t=this.formatearFecha(o.setDate(o.getDate()+60));this.diaPagoSinFormatear=o.setDate(o.getDate()+60),console.log("nuevoDate"),console.log(t),this.diaPago=t}if(this.condicionpago==33){let t=this.formatearFecha(o.setDate(o.getDate()+90));this.diaPagoSinFormatear=o.setDate(o.getDate()+90),console.log("nuevoDate"),console.log(t),this.diaPago=t}if(this.condicionpago==35){let t=this.formatearFecha(o.setDate(o.getDate()+70));this.diaPagoSinFormatear=o.setDate(o.getDate()+70),console.log("nuevoDate"),console.log(t),this.diaPago=t}if(this.condicionpago==29){let t=this.formatearFecha(o.setDate(o.getDate()+90));this.diaPagoSinFormatear=o.setDate(o.getDate()+90),console.log("nuevoDate"),console.log(t),this.diaPago=t}this.condicionpago!=39&&this.condicionpago!=26&&this.condicionpago!=25&&this.condicionpago!=30&&this.condicionpago!=17&&this.condicionpago!=20&&this.condicionpago!=18&&this.condicionpago!=34&&this.condicionpago!=24&&this.condicionpago!=19&&this.condicionpago!=22&&this.condicionpago!=10&&this.condicionpago!=27&&this.condicionpago!=16&&this.condicionpago!=36&&this.condicionpago!=14&&this.condicionpago!=28&&this.condicionpago!=37&&this.condicionpago!=38&&this.condicionpago!=12&&this.condicionpago!=23&&this.condicionpago!=32&&this.condicionpago!=33&&this.condicionpago!=35&&this.condicionpago!=29&&(this.diaPago=null)},formatearFecha(o){console.log("fecha en form"),console.log(o);let r=new Date(o);return console.log("fecha1"),console.log(r),this.diaPagoSinFormatear=r.getUTCDate(),console.log("this.diaPagoSinFormatear"),console.log(this.diaPagoSinFormatear),r.toLocaleDateString()},async onSubmit(){if(this.condicionpago==null)B({type:"error",message:"\xA1Se debe seleccionar forma de pago!"});else{this.loadingBtnGuardar=!0,console.log("this.arrayInformacionParaCarga"),console.log(this.arrayInformacionParaCarga);let o={idProveedor:this.idProveedor,idPresupuestacion:this.idPresupuestacion,totalPP:this.totalPP,precioFlete:this.precioFlete,proveedor_monto_factura_A:this.montoIVA,descuentosyBonificaciones:this.descuentosyBonificaciones,totalHomogeneo:this.totalHomogeneo,arrProductosProveedores:JSON.stringify(this.arrayInformacionParaCarga)};this.opcionesFacturaA.forEach(r=>{(this.facturaA==r.value||this.facturaA==r.label)&&(o.facturaA=r.value)}),this.arrayCondicionesPago.forEach(r=>{(this.condicionpago===r.condicionpago_nombre||this.condicionpago===r.condicionpago_id)&&(o.condicionpago=r.condicionpago_id)}),await this.axios.post("/api/presupuestacionproductosproveedor/crear",o).then(r=>{console.log(r),r&&(B({type:"success",message:"\xA1Carga realizada con \xE9xito!"}),this.cerrar())})}},classChecker({row:o,column:r}){r.property=="pp"}}},L=o=>(K("data-v-186ea1de"),o=o(),Q(),o),cr={key:0},lr={key:0,style:{"margin-top":"20px"}},dr=L(()=>l("span",{style:{"text-align":"center"}},"Total PP",-1)),sr=L(()=>l("span",null,"Forma de pago",-1)),ur=L(()=>l("span",null,"\xBFFactura A?",-1)),pr=L(()=>l("span",{style:{"text-align":"center"}},"Monto factura A",-1)),fr=L(()=>l("span",{style:{"text-align":"center"}},"Flete",-1)),_r=L(()=>l("span",{style:{"text-align":"center"}},"Desc. y bonif.",-1)),gr=L(()=>l("span",{style:{"text-align":"center"}},"Total",-1)),br={class:"contenedorBtnSiguienteAtras"},hr=v(" Guardar ");function mr(o,r,t,e,i,c){const k=p("el-descriptions-item"),x=p("el-descriptions"),_=p("el-table-column"),b=p("el-input-number"),S=p("el-table"),u=p("el-col"),y=p("el-row"),D=p("el-option"),I=p("el-select"),A=p("el-button"),V=p("modal"),g=G("loading");return f(),P("div",null,[a(V,{ref:"modal",titulo:"Carga de los productos seg\xFAn proveedor","impedir-close":o.impedirClose,width:"80%"},{default:n(()=>[U((f(),P("div",null,[i.datosProveedor?(f(),P("div",cr,[a(x,{title:"Datos del proveedor",column:3,border:""},{default:n(()=>[a(k,{label:"Proveedor","label-align":"center",align:"center"},{default:n(()=>[l("b",null,h(i.datosProveedor.proveedor_nombre),1)]),_:1}),a(k,{label:"Mail","label-align":"center",align:"center"},{default:n(()=>[v(h(i.datosProveedor.proveedor_mail),1)]),_:1})]),_:1})])):M("",!0)])),[[g,i.loadingDatosProveedor]]),U((f(),P("div",null,[i.arrayInformacionParaCarga?(f(),P("div",lr,[a(S,{data:i.arrayInformacionParaCarga,stripe:"",style:{width:"100%","margin-top":"15px"},"cell-class-name":c.classChecker,"summary-method":c.getSummaries,"show-summary":""},{default:n(()=>[a(_,{prop:"ID",label:"ID",width:"80"},{default:n(s=>[v(h(s.row.producto_id),1)]),_:1}),a(_,{prop:"nombre",label:"Nombre","min-width":"150"},{default:n(s=>[v(h(s.row.producto_nombre),1)]),_:1}),a(_,{prop:"rubro",label:"Rubro"},{default:n(s=>[v(h(s.row.presupuestacion_rubro_nombre),1)]),_:1}),a(_,{prop:"cantidad",label:"Cantidad"},{default:n(s=>[v(h(s.row.producto_cantidad_a_comprar),1)]),_:1}),a(_,{prop:"factor",label:"Factor",align:"center"},{default:n(s=>[a(b,{modelValue:s.row.factor,"onUpdate:modelValue":E=>s.row.factor=E,controls:!1,style:{width:"100%"},onChange:E=>c.cambiarCantidadProveedor(s)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),a(_,{prop:"cantidadProveedor",label:"Cant. prov.",align:"center"},{default:n(s=>[a(b,{modelValue:s.row.cantidad_proveedor,"onUpdate:modelValue":E=>s.row.cantidad_proveedor=E,controls:!1,style:{width:"100%"},disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(_,{prop:"png",label:"PNG",align:"center"},{default:n(s=>[a(b,{modelValue:s.row.precio_png,"onUpdate:modelValue":E=>s.row.precio_png=E,controls:!1,style:{width:"100%"},onChange:E=>c.calcularPrecioPP(s)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),a(_,{prop:"iva",label:"IVA",align:"center"},{default:n(s=>[a(b,{modelValue:s.row.iva,"onUpdate:modelValue":E=>s.row.iva=E,controls:!1,style:{width:"100%"},onChange:E=>c.calcularPrecioPP(s)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),a(_,{prop:"montoIva",label:"Total IVA",align:"center"},{default:n(s=>[a(b,{modelValue:s.row.total_iva,"onUpdate:modelValue":E=>s.row.total_iva=E,controls:!1,style:{width:"100%"},disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(_,{prop:"pu",label:"PU",align:"center"},{default:n(s=>[a(b,{modelValue:s.row.precio_pu,"onUpdate:modelValue":E=>s.row.precio_pu=E,controls:!1,style:{width:"100%"},disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(_,{prop:"pp",label:"PP",align:"center"},{default:n(s=>[a(b,{modelValue:s.row.precio_pp,"onUpdate:modelValue":E=>s.row.precio_pp=E,controls:!1,style:{width:"100%"},disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data","cell-class-name","summary-method"]),a(y,{gutter:10,style:{"margin-top":"15px"}},{default:n(()=>[a(u,{span:3}),a(u,{span:3}),a(u,{span:3}),a(u,{span:6}),a(u,{span:3}),a(u,{span:3}),a(u,{span:3},{default:n(()=>[dr,a(b,{controls:!1,modelValue:i.totalPP,"onUpdate:modelValue":r[0]||(r[0]=s=>i.totalPP=s),style:{width:"100%"},disabled:"",onChange:r[1]||(r[1]=s=>c.calcularTotalHomegeno())},null,8,["modelValue"])]),_:1})]),_:1}),a(y,{gutter:10,style:{"margin-top":"10px"}},{default:n(()=>[a(u,{span:3}),a(u,{span:3}),a(u,{span:3}),a(u,{span:3}),a(u,{span:6},{default:n(()=>[sr,a(I,{modelValue:i.condicionpago,"onUpdate:modelValue":r[2]||(r[2]=s=>i.condicionpago=s),placeholder:"Forma de pago",style:{width:"100%"},filterable:"",onChange:r[3]||(r[3]=s=>c.cambiaCondicionPago())},{default:n(()=>[(f(!0),P(F,null,N(i.arrayCondicionesPago,s=>(f(),T(D,{key:s.condicionpago_id,label:s.condicionpago_nombre,value:s.condicionpago_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(u,{span:3},{default:n(()=>[ur,a(I,{modelValue:i.facturaA,"onUpdate:modelValue":r[4]||(r[4]=s=>i.facturaA=s),placeholder:"Seleccione",style:{width:"100%"},onChange:r[5]||(r[5]=s=>c.cambiarDisabledEmiteFactura())},{default:n(()=>[(f(!0),P(F,null,N(i.opcionesFacturaA,s=>(f(),T(D,{key:s.value,label:s.label,value:s.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(u,{span:3},{default:n(()=>[pr,a(b,{controls:!1,modelValue:i.montoIVA,"onUpdate:modelValue":r[6]||(r[6]=s=>i.montoIVA=s),style:{width:"100%"},disabled:i.disabledEmiteFactura,onChange:r[7]||(r[7]=s=>c.calcularTotalHomegeno())},null,8,["modelValue","disabled"])]),_:1})]),_:1}),a(y,{gutter:10,style:{"margin-top":"10px"}},{default:n(()=>[a(u,{span:3}),a(u,{span:3}),a(u,{span:3}),a(u,{span:3}),a(u,{span:6}),a(u,{span:3}),a(u,{span:3},{default:n(()=>[fr,a(b,{controls:!1,modelValue:i.precioFlete,"onUpdate:modelValue":r[8]||(r[8]=s=>i.precioFlete=s),style:{width:"100%"},min:0,onChange:r[9]||(r[9]=s=>c.calcularTotalHomegeno())},null,8,["modelValue"])]),_:1})]),_:1}),a(y,{gutter:10,style:{"margin-top":"10px"}},{default:n(()=>[a(u,{span:3}),a(u,{span:3}),a(u,{span:3}),a(u,{span:3}),a(u,{span:6}),a(u,{span:3}),a(u,{span:3},{default:n(()=>[_r,a(b,{controls:!1,modelValue:i.descuentosyBonificaciones,"onUpdate:modelValue":r[10]||(r[10]=s=>i.descuentosyBonificaciones=s),style:{width:"100%"},onChange:r[11]||(r[11]=s=>c.calcularTotalHomegeno())},null,8,["modelValue"])]),_:1})]),_:1}),a(y,{gutter:10,style:{"margin-top":"10px"}},{default:n(()=>[a(u,{span:3}),a(u,{span:3}),a(u,{span:3}),a(u,{span:3}),a(u,{span:6}),a(u,{span:3}),a(u,{span:3},{default:n(()=>[gr,a(b,{controls:!1,modelValue:i.totalHomogeneo,"onUpdate:modelValue":r[12]||(r[12]=s=>i.totalHomogeneo=s),style:{width:"100%"},min:0,disabled:""},null,8,["modelValue"])]),_:1})]),_:1})])):M("",!0),l("div",br,[a(A,{type:"primary",class:"btnSiguiente",onClick:r[13]||(r[13]=s=>c.onSubmit()),loading:i.loadingBtnGuardar},{default:n(()=>[hr]),_:1},8,["loading"])])])),[[g,i.loadingArrayInformacionParaCarga]])]),_:1},8,["impedir-close"])])}var Pr=z(nr,[["render",mr],["__scopeId","data-v-186ea1de"]]);const vr={components:{ModalCargaPorProveedor:Pr},data(){return{id:null,loading:!1,loadingProductos:!1,loadingProveedores:!1,loadingInformacionParaCarga:!1,datos:null,datosProductos:[],datosProveedores:[],arrayInformacionParaCarga:[],arrayProductosDesdeAPI:[],active:0}},methods:{abrir(o){this.active=0,this.loading=!0,this.loadingProductos=!0,this.loadingProveedores=!0,this.loadingInformacionParaCarga=!0,this.id=null,this.id=o,this.datos=null,this.datosProductos=[],this.datosProveedores=[],this.arrayInformacionParaCarga=[],this.arrayProductosDesdeAPI=[],this.$refs.modal.abrir(),this.getDatos()},cerrar(){this.$refs.modal.cerrar()},async getDatos(){await this.axios.get("/api/presupuestacion/obtenerDatos/"+this.id).then(o=>{const r=o;console.log("respuestaApi de getDatos"),console.log(r.data),r!=null?(this.datos=r.data,console.log(this.datos),this.loading=!1,this.datosProductos=r.data.productos,this.loadingProductos=!1,this.datosProveedores=r.data.proveedores,console.log("this.datosProveedores"),console.log(this.datosProveedores),this.loadingProveedores=!1,this.mostrarInformacionParaCargar(),console.log("this.arrayInformacionParaCarga"),console.log(this.arrayInformacionParaCarga)):this.cerrar()})},mostrarInformacionParaCargar(){this.datosProveedores.forEach(o=>{this.datosProductos.forEach(r=>{let t={presupuestacion_productos_proveedores_id:0,presupuestacion_plan_id:this.datos.presupuestacion_plan_id,presupuestacion_id:this.datos.presupuestacion_id,presupuestacion_producto_id:r.presupuestacion_producto_id,presupuestacion_rubro_id:this.datos.presupuestacion_rubro_id,presupuestacion_rubro_nombre:this.datos.presupuestacion_rubro_nombre,proveedor_id:o.proveedor_id,proveedor_nombre:o.proveedor_nombre,proveedor_mail:o.proveedor_mail,producto_id:r.producto_id,producto_nombre:r.producto_nombre,producto_cantidad_real_a_comprar:r.producto_cantidad_real_a_comprar,precio_png:0,iva:0,precio_pu:0,precio_pp:0,ya_agregado:0};this.arrayInformacionParaCarga.push(t)})}),this.completarArrayConProductosAgregados()},async completarArrayConProductosAgregados(){await this.axios.get("/api/presupuestacionproductosproveedor/obtenerTodos/"+this.id).then(o=>{this.arrayProductosDesdeAPI=o.data}),this.arrayInformacionParaCarga.forEach(o=>{this.arrayProductosDesdeAPI.forEach(r=>{o.presupuestacion_producto_id==r.presupuestacion_producto_id&&o.proveedor_id==r.proveedor_id&&(o.presupuestacion_productos_proveedores_id=r.presupuestacion_productos_proveedores_id,o.presupuestacion_productos_proveedores_id=r.presupuestacion_productos_proveedores_id,o.presupuestacion_producto_id=r.presupuestacion_producto_id,o.presupuestacion_id=r.presupuestacion_id,o.presupuestacion_plan_id=r.presupuestacion_plan_id,o.presupuestacion_rubro_id=r.presupuestacion_rubro_id,o.presupuestacion_rubro_nombre=r.presupuestacion_rubro_nombre,o.proveedor_id=r.proveedor_id,o.proveedor_nombre=r.proveedor_nombre,o.proveedor_mail=r.proveedor_mail,o.producto_id=r.producto_id,o.producto_nombre=r.producto_nombre,o.producto_cantidad_real_a_comprar=r.producto_cantidad_a_comprar,o.precio_png=r.precio_png,o.iva=r.iva,o.precio_pu=r.precio_pu,o.precio_pp=r.precio_pp,o.ya_agregado=1)})}),console.log("this.arrayInformacionParaCarga despues de API"),console.log(this.arrayInformacionParaCarga),this.loadingInformacionParaCarga=!1},async onSubmit(){console.log("this.arrayInformacionParaCargaGuardar"),console.log(this.arrayInformacionParaCarga);let o={arrProductosProveedores:JSON.stringify(this.arrayInformacionParaCarga)};await this.axios.post("/api/presupuestacionproductosproveedor/crear",o).then(r=>{console.log(r),r&&(B({type:"success",message:"\xA1Carga realizada con \xE9xito!"}),this.cerrar())})},formatearFecha(o){return new Date(o).toLocaleDateString()}}},kr=o=>(K("data-v-61b8010f"),o=o(),Q(),o),yr=kr(()=>l("span",{class:"material-icons"},"inventory_2",-1));function Cr(o,r,t,e,i,c){const k=p("el-table-column"),x=p("el-button"),_=p("el-table"),b=p("modal"),S=p("modal-carga-por-proveedor"),u=G("loading");return f(),P(F,null,[l("div",null,[a(b,{ref:"modal",titulo:"Proveedores","impedir-close":o.impedirClose,width:"70%"},{default:n(()=>[U((f(),P("div",null,[a(_,{data:i.datosProveedores,stripe:"",style:{width:"100%"}},{default:n(()=>[a(k,{prop:"ID",label:"ID"},{default:n(y=>[v(h(y.row.proveedor_id),1)]),_:1}),a(k,{prop:"Nombre",label:"Nombre"},{default:n(y=>[v(h(y.row.proveedor_nombre),1)]),_:1}),a(k,{label:"Cargar",prop:"cargar","header-align":"right",align:"right",width:"90px"},{default:n(y=>[a(x,{type:"primary",circle:"",onClick:D=>o.$refs.modalCargaPorProveedor.abrir(y.row.proveedor_id,y.row.presupuestacion_id)},{default:n(()=>[yr]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])),[[u,i.loadingInformacionParaCarga]])]),_:1},8,["impedir-close"])]),a(S,{ref:"modalCargaPorProveedor"},null,512)],64)}var Dr=z(vr,[["render",Cr],["__scopeId","data-v-61b8010f"]]);const xr={data(){return{idProveedor:null,idPresupuestacion:null,arrayInformacionParaCarga:[],datosGenerales:null,datosProductos:[],datosProveedor:null,arrayInformacionParaCarga:[],arrayProductosDesdeAPI:[],loadingDatosProveedor:!1,loadingArrayInformacionParaCarga:!1,totalPP:0,precioFlete:null,facturaA:null,arrayCondicionesPago:[],condicionpago:null,descuentosyBonificaciones:null,totalHomogeneo:null,loadingBtnGuardar:!1,opcionesFacturaA:[{value:"0",label:"No"},{value:"1",label:"Si"}]}},methods:{abrir(o,r){this.loadingDatosProveedor=!0,this.loadingArrayInformacionParaCarga=!0,this.idProveedor=null,this.idProveedor=o,this.idPresupuestacion=null,this.idPresupuestacion=r,this.arrayInformacionParaCarga=[],this.datosGenerales=null,this.datosProductos=[],this.datosProveedor=null,this.arrayInformacionParaCarga=[],this.arrayProductosDesdeAPI=[],this.totalPP=0,this.precioFlete=null,this.facturaA=null,this.arrayCondicionesPago=[],this.condicionpago=null,this.descuentosyBonificaciones=null,this.totalHomogeneo=null,console.log("this.idProveedor"),console.log(this.idProveedor),console.log("this.idPresupuestacion"),console.log(this.idPresupuestacion),this.loadingBtnGuardar=!1,this.$refs.modal.abrir(),this.getCondicionesPago(),this.getDatos()},cerrar(){this.$refs.modal.cerrar()},async getDatos(){await this.axios.get("/api/presupuestacion/obtenerDatos/"+this.idPresupuestacion).then(o=>{const r=o;if(r!=null){this.datosGenerales=r.data,console.log("this.datosGenerales"),console.log(this.datosGenerales),this.datosProductos=r.data.productos,console.log("this.datosProductos"),console.log(this.datosProductos);let t=[];t=r.data.proveedores,t.forEach(e=>{if(this.idProveedor==e.proveedor_id){let i={presupuestacion_id:e.presupuestacion_id,presupuestacion_plan_id:e.presupuestacion_plan_id,presupuestacion_proveedor_id:e.presupuestacion_proveedor_id,proveedor_id:e.proveedor_id,proveedor_mail:e.proveedor_mail,proveedor_nombre:e.proveedor_nombre,proveedor_rubro_id:e.proveedor_rubro_id};this.datosProveedor=i}}),console.log("this.datosProveedor"),console.log(this.datosProveedor),this.loadingDatosProveedor=!1,this.mostrarInformacionParaCargar()}else this.cerrar()})},async getCondicionesPago(){await this.axios.get("/api/condicionpago/obtenerTodos").then(o=>{const r=o;this.arrayCondicionesPago=r.data,console.log("this.arrayCondicionesPago"),console.log(this.arrayCondicionesPago)})},getSummaries(o){console.log("param de getSummaries"),console.log(o),this.$refs.tablaComparativa;const r=[];let t=8;return r[t]=0,this.arrayInformacionParaCarga.forEach((e,i)=>{console.log("elemento"),console.log(e),i==0&&(r[i]="Total"),r[t]=r[t]+Number(e.total_iva)}),console.log("sums"),console.log(r),r},mostrarInformacionParaCargar(){this.datosProductos.forEach(o=>{let r={presupuestacion_productos_proveedores_id:0,presupuestacion_plan_id:this.datosGenerales.presupuestacion_plan_id,presupuestacion_id:this.datosGenerales.presupuestacion_id,presupuestacion_producto_id:o.productoPresupuestacion.presupuestacion_producto_id,presupuestacion_rubro_id:this.datosGenerales.presupuestacion_rubro_id,presupuestacion_rubro_nombre:this.datosGenerales.presupuestacion_rubro_nombre,proveedor_id:this.datosProveedor.proveedor_id,proveedor_nombre:this.datosProveedor.proveedor_nombre,proveedor_mail:this.datosProveedor.proveedor_mail,producto_id:o.productoPresupuestacion.producto_id,producto_nombre:o.productoPresupuestacion.producto_nombre,producto_cantidad_a_comprar:o.productoPresupuestacion.producto_cantidad_a_comprar,precio_png:o.productoPresupuestacion.precio_png,factor:1,cantidad_proveedor:o.productoPresupuestacion.producto_cantidad_a_comprar,iva:o.productoPresupuestacion.iva,total_iva:null,precio_pu:o.productoPresupuestacion.precio_pu,precio_pp:o.productoPresupuestacion.precio_pp,ya_agregado:0};this.arrayInformacionParaCarga.push(r)}),console.log("this.arrayInformacionParaCarga"),console.log(this.arrayInformacionParaCarga),this.completarArrayConProductosAgregados()},async completarArrayConProductosAgregados(){let o={idPresupuestacion:this.idPresupuestacion,idProveedor:this.idProveedor};await this.axios.post("/api/presupuestacionproductosproveedor/obtenerTodosDatos",o).then(r=>{console.log("response.data*********"),console.log(r.data),this.arrayProductosDesdeAPI=r.data.productoProveedor,this.totalPP=r.data.presupuestacionProveedorDB.proveedor_monto_totalPP,this.precioFlete=r.data.presupuestacionProveedorDB.proveedor_monto_flete,r.data.presupuestacionProveedorDB.proveedor_factura_A==1?this.facturaA="Si":this.facturaA="No",this.arrayCondicionesPago.forEach(t=>{t.condicionpago_id==r.data.presupuestacionProveedorDB.proveedor_forma_de_pago&&(this.condicionpago=t.condicionpago_nombre)}),this.descuentosyBonificaciones=r.data.presupuestacionProveedorDB.proveedor_monto_descuentos_bonificaciones,this.totalHomogeneo=r.data.presupuestacionProveedorDB.proveedor_monto_total_homogeneo}),this.arrayInformacionParaCarga.forEach(r=>{this.arrayProductosDesdeAPI.forEach(t=>{r.presupuestacion_producto_id==t.presupuestacion_producto_id&&r.proveedor_id==t.proveedor_id&&(r.presupuestacion_productos_proveedores_id=t.presupuestacion_productos_proveedores_id,r.presupuestacion_productos_proveedores_id=t.presupuestacion_productos_proveedores_id,r.presupuestacion_producto_id=t.presupuestacion_producto_id,r.presupuestacion_id=t.presupuestacion_id,r.presupuestacion_plan_id=t.presupuestacion_plan_id,r.presupuestacion_rubro_id=t.presupuestacion_rubro_id,r.presupuestacion_rubro_nombre=t.presupuestacion_rubro_nombre,r.proveedor_id=t.proveedor_id,r.proveedor_nombre=t.proveedor_nombre,r.proveedor_mail=t.proveedor_mail,r.producto_id=t.producto_id,r.producto_nombre=t.producto_nombre,r.producto_cantidad_real_a_comprar=t.producto_cantidad_a_comprar,r.factor=t.factor,r.cantidad_proveedor=t.cantidad_proveedor,r.precio_png=t.precio_png,r.iva=t.iva,r.total_iva=t.total_iva,r.precio_pu=t.precio_pu,r.precio_pp=t.precio_pp,r.ya_agregado=1)})}),console.log("this.arrayInformacionParaCarga despues de API"),console.log(this.arrayInformacionParaCarga),this.loadingArrayInformacionParaCarga=!1},calcularPrecioPP(o){if(console.log("Calcular precio"),console.log(o.$index),console.log(o.row),this.arrayInformacionParaCarga[o.$index].iva!=null&&this.arrayInformacionParaCarga[o.$index].precio_png!=null){let t=parseFloat(this.arrayInformacionParaCarga[o.$index].iva)*.01;console.log("porcentaje"),console.log(t);let e=parseFloat(t*this.arrayInformacionParaCarga[o.$index].precio_png);console.log("precioParcial"),console.log(e);let c=(parseFloat(this.arrayInformacionParaCarga[o.$index].precio_png)+e).toFixed(2);console.log("precio_pu"),console.log(c),this.arrayInformacionParaCarga[o.$index].precio_pu=c,console.log("this.arrayInformacionParaCarga[props.$index].precio_pu"),console.log(this.arrayInformacionParaCarga[o.$index].precio_pu),this.arrayInformacionParaCarga[o.$index].precio_pp=this.arrayInformacionParaCarga[o.$index].precio_pu*this.arrayInformacionParaCarga[o.$index].producto_cantidad_a_comprar;let k=this.arrayInformacionParaCarga[o.$index].precio_pp;this.arrayInformacionParaCarga[o.$index].precio_pp=k.toFixed(2),this.sumarPP(o)}},sumarPP(o){this.totalPP=0,console.log("ejecuta sumarPP"),this.arrayInformacionParaCarga.forEach(t=>{console.log("elemento.precio_pp"),console.log(t.precio_pp),t.precio_pp!=null&&(this.totalPP=this.totalPP+parseFloat(t.precio_pp))});let r=this.totalPP.toFixed(2);this.totalPP=r,console.log(this.totalPP),this.calcularTotalHomegeno()},calcularTotalHomegeno(){console.log("this.totalPP"),console.log(parseFloat(this.totalPP)),console.log("this.precioFlete"),console.log(parseFloat(this.precioFlete)),console.log("this.descuentosyBonificaciones"),console.log(parseFloat(this.descuentosyBonificaciones));let o=parseFloat(this.totalPP)+parseFloat(this.precioFlete)+parseFloat(this.descuentosyBonificaciones);this.totalHomogeneo=o.toFixed(2)},async onSubmit(){this.loadingBtnGuardar=!0,console.log("this.arrayInformacionParaCarga"),console.log(this.arrayInformacionParaCarga);let o={idProveedor:this.idProveedor,idPresupuestacion:this.idPresupuestacion,totalPP:this.totalPP,precioFlete:this.precioFlete,descuentosyBonificaciones:this.descuentosyBonificaciones,totalHomogeneo:this.totalHomogeneo,arrProductosProveedores:JSON.stringify(this.arrayInformacionParaCarga)};this.opcionesFacturaA.forEach(r=>{(this.facturaA==r.value||this.facturaA==r.label)&&(o.facturaA=r.value)}),this.arrayCondicionesPago.forEach(r=>{(this.condicionpago===r.condicionpago_nombre||this.condicionpago===r.condicionpago_id)&&(o.condicionpago=r.condicionpago_id)}),await this.axios.post("/api/presupuestacionproductosproveedor/crear",o).then(r=>{console.log(r),r&&(B({type:"success",message:"\xA1Carga realizada con \xE9xito!"}),this.cerrar())})},classChecker({row:o,column:r}){r.property=="pp"}}},J=o=>(K("data-v-aa75d32a"),o=o(),Q(),o),Ir={key:0},Ar={key:0,style:{"margin-top":"20px"}},Sr=J(()=>l("span",{style:{"text-align":"center"}},"Total PP",-1)),Vr=J(()=>l("span",null,"Forma de pago",-1)),Fr=J(()=>l("span",null,"\xBFFactura A?",-1)),Er=J(()=>l("span",{style:{"text-align":"center"}},"Flete",-1)),wr=J(()=>l("span",{style:{"text-align":"center"}},"Desc. y bonif.",-1)),Ur=J(()=>l("span",{style:{"text-align":"center"}},"Tot. homog\xE9neo",-1));function Nr(o,r,t,e,i,c){const k=p("el-descriptions-item"),x=p("el-descriptions"),_=p("el-table-column"),b=p("el-input-number"),S=p("el-table"),u=p("el-col"),y=p("el-row"),D=p("el-option"),I=p("el-select"),A=p("modal"),V=G("loading");return f(),P("div",null,[a(A,{ref:"modal",titulo:"Carga de los productos seg\xFAn proveedor","impedir-close":o.impedirClose,width:"80%"},{default:n(()=>[U((f(),P("div",null,[i.datosProveedor?(f(),P("div",Ir,[a(x,{title:"Datos del proveedor",column:3,border:""},{default:n(()=>[a(k,{label:"Proveedor","label-align":"center",align:"center"},{default:n(()=>[l("b",null,h(i.datosProveedor.proveedor_nombre),1)]),_:1}),a(k,{label:"Mail","label-align":"center",align:"center"},{default:n(()=>[v(h(i.datosProveedor.proveedor_mail),1)]),_:1})]),_:1})])):M("",!0)])),[[V,i.loadingDatosProveedor]]),U((f(),P("div",null,[i.arrayInformacionParaCarga?(f(),P("div",Ar,[a(S,{data:i.arrayInformacionParaCarga,stripe:"",style:{width:"100%","margin-top":"15px"},"cell-class-name":c.classChecker,"summary-method":c.getSummaries,"show-summary":""},{default:n(()=>[a(_,{prop:"ID",label:"ID",width:"80"},{default:n(g=>[v(h(g.row.producto_id),1)]),_:1}),a(_,{prop:"nombre",label:"Nombre","min-width":"150"},{default:n(g=>[v(h(g.row.producto_nombre),1)]),_:1}),a(_,{prop:"rubro",label:"Rubro"},{default:n(g=>[v(h(g.row.presupuestacion_rubro_nombre),1)]),_:1}),a(_,{prop:"cantidad",label:"Cantidad"},{default:n(g=>[v(h(g.row.producto_cantidad_a_comprar),1)]),_:1}),a(_,{prop:"factor",label:"Factor",align:"center"},{default:n(g=>[a(b,{modelValue:g.row.factor,"onUpdate:modelValue":s=>g.row.factor=s,controls:!1,style:{width:"100%"},onChange:s=>o.cambiarCantidadProveedor(g),disabled:""},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),a(_,{prop:"cantidadProveedor",label:"Cant. prov.",align:"center"},{default:n(g=>[a(b,{modelValue:g.row.cantidad_proveedor,"onUpdate:modelValue":s=>g.row.cantidad_proveedor=s,controls:!1,style:{width:"100%"},disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(_,{prop:"png",label:"PNG",align:"center"},{default:n(g=>[a(b,{modelValue:g.row.precio_png,"onUpdate:modelValue":s=>g.row.precio_png=s,controls:!1,style:{width:"100%"},onChange:s=>c.calcularPrecioPP(g),disabled:""},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),a(_,{prop:"iva",label:"IVA",align:"center"},{default:n(g=>[a(b,{modelValue:g.row.iva,"onUpdate:modelValue":s=>g.row.iva=s,controls:!1,style:{width:"100%"},onChange:s=>c.calcularPrecioPP(g),disabled:""},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),a(_,{prop:"montoIva",label:"Total IVA",align:"center"},{default:n(g=>[a(b,{modelValue:g.row.total_iva,"onUpdate:modelValue":s=>g.row.total_iva=s,controls:!1,style:{width:"100%"},disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(_,{prop:"pu",label:"PU",align:"center"},{default:n(g=>[a(b,{modelValue:g.row.precio_pu,"onUpdate:modelValue":s=>g.row.precio_pu=s,controls:!1,style:{width:"100%"},disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(_,{prop:"pp",label:"PP",align:"center"},{default:n(g=>[a(b,{modelValue:g.row.precio_pp,"onUpdate:modelValue":s=>g.row.precio_pp=s,controls:!1,style:{width:"100%"},disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data","cell-class-name","summary-method"]),a(y,{gutter:10,style:{"margin-top":"15px"}},{default:n(()=>[a(u,{span:3}),a(u,{span:3}),a(u,{span:3}),a(u,{span:6}),a(u,{span:3}),a(u,{span:3}),a(u,{span:3},{default:n(()=>[Sr,a(b,{controls:!1,modelValue:i.totalPP,"onUpdate:modelValue":r[0]||(r[0]=g=>i.totalPP=g),style:{width:"100%"},disabled:"",onChange:r[1]||(r[1]=g=>c.calcularTotalHomegeno())},null,8,["modelValue"])]),_:1})]),_:1}),a(y,{gutter:10,style:{"margin-top":"10px"}},{default:n(()=>[a(u,{span:3}),a(u,{span:3}),a(u,{span:3}),a(u,{span:3}),a(u,{span:6},{default:n(()=>[Vr,a(I,{modelValue:i.condicionpago,"onUpdate:modelValue":r[2]||(r[2]=g=>i.condicionpago=g),placeholder:"Forma de pago",style:{width:"100%"},filterable:"",disabled:""},{default:n(()=>[(f(!0),P(F,null,N(i.arrayCondicionesPago,g=>(f(),T(D,{key:g.condicionpago_id,label:g.condicionpago_nombre,value:g.condicionpago_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(u,{span:3},{default:n(()=>[Fr,a(I,{modelValue:i.facturaA,"onUpdate:modelValue":r[3]||(r[3]=g=>i.facturaA=g),placeholder:"Seleccione",style:{width:"100%"},disabled:""},{default:n(()=>[(f(!0),P(F,null,N(i.opcionesFacturaA,g=>(f(),T(D,{key:g.value,label:g.label,value:g.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(u,{span:3},{default:n(()=>[Er,a(b,{controls:!1,modelValue:i.precioFlete,"onUpdate:modelValue":r[4]||(r[4]=g=>i.precioFlete=g),style:{width:"100%"},min:0,onChange:r[5]||(r[5]=g=>c.calcularTotalHomegeno()),disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),a(y,{gutter:10,style:{"margin-top":"10px"}},{default:n(()=>[a(u,{span:3}),a(u,{span:3}),a(u,{span:3}),a(u,{span:3}),a(u,{span:6}),a(u,{span:3}),a(u,{span:3},{default:n(()=>[wr,a(b,{controls:!1,modelValue:i.descuentosyBonificaciones,"onUpdate:modelValue":r[6]||(r[6]=g=>i.descuentosyBonificaciones=g),style:{width:"100%"},onChange:r[7]||(r[7]=g=>c.calcularTotalHomegeno()),disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),a(y,{gutter:10,style:{"margin-top":"10px"}},{default:n(()=>[a(u,{span:3}),a(u,{span:3}),a(u,{span:3}),a(u,{span:3}),a(u,{span:6}),a(u,{span:3}),a(u,{span:3},{default:n(()=>[Ur,a(b,{controls:!1,modelValue:i.totalHomogeneo,"onUpdate:modelValue":r[8]||(r[8]=g=>i.totalHomogeneo=g),style:{width:"100%"},min:0,disabled:""},null,8,["modelValue"])]),_:1})]),_:1})])):M("",!0)])),[[V,i.loadingArrayInformacionParaCarga]])]),_:1},8,["impedir-close"])])}var Tr=z(xr,[["render",Nr],["__scopeId","data-v-aa75d32a"]]);const Rr={data(){return{id:null,item:null,notas:null}},methods:{abrir(o){this.$refs.modal.abrir(),this.item=null,this.item=o,this.notas=o.proveedor_notas,console.log("item"),console.log(this.item)},cerrar(){this.$refs.modal.cerrar()},guardarNota(){console.log("guardar nota"),console.log(this.notas);let o={notas:this.notas,item:this.item};this.$emit("update:cantidadSacarDeposito",o),this.cerrar()}}},Mr=l("span",null,"Ingrese la nota deseada",-1),Br={style:{display:"flex"}},Hr={style:{"margin-left":"auto"}},Or=v(" Guardar nota ");function $r(o,r,t,e,i,c){const k=p("el-input"),x=p("el-button"),_=p("modal");return f(),P("div",null,[a(_,{ref:"modal",titulo:"Notas de la comparativa","impedir-close":o.impedirClose},{default:n(()=>[Mr,a(k,{modelValue:i.notas,"onUpdate:modelValue":r[0]||(r[0]=b=>i.notas=b),placeholder:"Ingrese la nota deseada",clearable:"",style:{"margin-bottom":"10px"}},null,8,["modelValue"]),l("div",Br,[l("div",Hr,[a(x,{type:"primary",onClick:r[1]||(r[1]=b=>c.guardarNota()),disabled:i.notas==null},{default:n(()=>[Or]),_:1},8,["disabled"])])])]),_:1},8,["impedir-close"])])}var zr=z(Rr,[["render",$r]]);const Gr={components:{modalCargaPorProveedorMostrar:Tr,modalNotas:zr},data(){return{id:null,datosAPI:[],arraySoloProductos:[],arrAux:[],mostrarTabla:!1,loadingTabla:!1,arrayTodosProductos:[],arrayProductos:[],longitudProveedores:null,totalHomogeneo:0,arrayTotal:[],arrayPrecioPPProveedores:[],arrayInfoProveedores:[],infoProveedores:[],condicionesPago:[],valorScroll:0,arrayCondicionesPago:[],arrayFormaPago:[],arrayTotalHomegeneoProveedores:[],arrayOpcionesEntregaFacturaA:[{label:"Si",value:1},{label:"No",value:0}]}},methods:{abrir(o){this.id=null,this.id=o,console.log("id que mando"),console.log(this.id),this.datosAPI=[],this.arraySoloProductos=[],this.arrAux=[],this.arrayTodosProductos=[],this.arrayProductos=[],this.longitudProveedores=null,this.mostrarTabla=!1,this.loadingTabla=!0,this.totalHomogeneo=0,this.arrayPrecioPPProveedores=[],this.arrayInfoProveedores=[],this.infoProveedores=[],this.condicionesPago=[],this.valorScroll=0,this.arrayTotalHomegeneoProveedores=[],this.$refs.modal.abrir();let r=document.querySelector("#tabla1");console.log("t1"),console.log(r),this.getCondicionesPago(),this.getDatos()},cerrar(){this.$refs.modal.cerrar()},async getCondicionesPago(){await this.axios.get("/api/condicionpago/obtenerTodos").then(o=>{const r=o;this.arrayCondicionesPago=r.data,console.log("this.arrayCondicionesPago"),console.log(this.arrayCondicionesPago),this.arrayCondicionesPago.forEach(t=>{let e={key:t.condicionpago_id,label:t.condicionpago_nombre,value:t.condicionpago_id};this.arrayFormaPago.push(e)}),console.log("this.arrayFormaPago"),console.log(this.arrayFormaPago)})},async getDatos(){await this.axios.get("/api/presupuestacionproductosproveedor/obtenerTodos/"+this.id).then(o=>{this.arrAux=o.data,console.log("this.arrAux"),console.log(this.arrAux),this.arrAux.forEach(r=>{let t={presupuestacion_id:r.presupuestacion_id,presupuestacion_plan_id:r.presupuestacion_plan_id,presupuestacion_proveedor_id:r.presupuestacion_proveedor_id,proveedor_factura_A:r.proveedor_factura_A,proveedor_forma_de_pago:r.proveedor_forma_de_pago,proveedor_id:r.proveedor_id,proveedor_mail:r.proveedor_mail,proveedor_monto_descuentos_bonificaciones:r.proveedor_monto_descuentos_bonificaciones,proveedor_monto_flete:r.proveedor_monto_flete,proveedor_monto_totalPP:Number(r.proveedor_monto_totalPP),proveedor_monto_total_homogeneo:r.proveedor_monto_total_homogeneo,proveedor_nombre:r.proveedor_nombre,proveedor_rubro_id:r.proveedor_rubro_id,proveedorSeleccionado:!1},e=[];r.productos.forEach(i=>{let c={created_at:i.created_at,iva:i.iva,totaliva:i.total_iva,precio_png:i.precio_png,precio_pp:Number(i.precio_pp),precio_pu:i.precio_pu,presupuestacion_id:i.presupuestacion_id,presupuestacion_plan_id:i.presupuestacion_plan_id,presupuestacion_producto_id:i.presupuestacion_producto_id,presupuestacion_productos_proveedores_id:i.presupuestacion_productos_proveedores_id,presupuestacion_rubro_id:i.presupuestacion_rubro_id,presupuestacion_rubro_nombre:i.presupuestacion_rubro_nombre,producto_cantidad_a_comprar:i.producto_cantidad_a_comprar,producto_id:i.producto_id,producto_nombre:i.producto_nombre,proveedor_id:i.proveedor_id,proveedor_mail:i.proveedor_mail,proveedor_nombre:i.proveedor_nombre,updated_at:i.updated_at,productoSeleccionado:!1,factor:i.factor,cantidad_proveedor:i.cantidad_proveedor};e.push(c)}),t.productos=e,this.datosAPI.push(t)}),this.mostrarTabla=!0,console.log("this.datosAPI"),console.log(this.datosAPI),this.longitudProveedores=this.datosAPI.length,console.log("this.longitudProveedores"),console.log(this.longitudProveedores),this.datosAPI.forEach(r=>{let t={};this.arrayPrecioPPProveedores.push(t),this.arrayPrecioPPProveedores.push(t),this.arrayPrecioPPProveedores.push(t),this.arrayPrecioPPProveedores.push(t),this.arrayPrecioPPProveedores.push(t),this.arrayPrecioPPProveedores.push(t),this.arrayPrecioPPProveedores.push(t);let e={presupuestacion_id:r.presupuestacion_id,presupuestacion_plan_id:r.presupuestacion_plan_id,proveedor_id:r.proveedor_id,proveedor_nombre:r.proveedor_nombre,proveedor_rubro_id:r.proveedor_rubro_id,titulo:"Total x prov.",totalPP:0};this.arrayPrecioPPProveedores.push(e)}),console.log("this.arrayPrecioPPProveedores"),console.log(this.arrayPrecioPPProveedores)}),this.crearArraySoloProductos(),this.calcularTotalHomogeneo(),this.getDatosProveedores()},crearArraySoloProductos(){this.datosAPI[0].productos.forEach(o=>{let r={producto_id:o.producto_id,producto_nombre:o.producto_nombre,producto_rubro_id:o.presupuestacion_rubro_id,producto_rubro:o.presupuestacion_rubro_nombre,cantidad_a_comprar:o.producto_cantidad_a_comprar};this.arraySoloProductos.push(r)}),this.crearArrayTodosProductos()},crearArrayTodosProductos(){this.datosAPI.forEach(o=>{this.arrayTodosProductos.push(o.productos)}),console.log("this.arraySoloProductos"),console.log(this.arraySoloProductos),console.log("this.arrayTodosProductos"),console.log(this.arrayTodosProductos),this.arrayTodosProductos.forEach(o=>{o.forEach(r=>{this.arrayProductos.push(r)})}),console.log("this.arrayProductos"),console.log(this.arrayProductos),this.marcarMenor()},marcarMenor(){let o;this.arraySoloProductos.forEach(r=>{o=this.arrayProductos.filter(i=>i.producto_id==r.producto_id);let t=o[0].precio_pp,e;o.forEach(i=>{i.precio_pp<=t&&(t=i.precio_pp,e=i)}),console.log("min"),console.log(t),this.datosAPI.forEach(i=>{i.productos.forEach(c=>{c.producto_id==e.producto_id&&c.proveedor_id==e.proveedor_id&&(c.productoSeleccionado=!0),c.producto_id==e.producto_id&&c.proveedor_id!=e.proveedor_id&&(c.productoSeleccionado=!1)})})})},moverscroll(o){const r=document.getElementById("midiv");console.log("element"),console.log(r),this.valorScroll=this.valorScroll+o,r.scrollLeft=this.valorScroll,console.log("element.scrollLeft"),console.log(r.scrollLeft)},cambiarCantidad(o){console.log("props"),console.log(o),console.log("this.datosAPI"),console.log(this.datosAPI),this.datosAPI.forEach(r=>{r.productos.forEach(t=>{if(o.row.producto_id==t.producto_id){console.log("ele"),console.log(t),t.cantidad_proveedor=o.row.cantidad_a_comprar*t.factor;let e=t.cantidad_proveedor*t.precio_pu,i=parseFloat(e);t.precio_pp=i.toFixed(2)}})}),this.actualizarPrecioTotal(),this.marcarMenor(),this.calcularPrecioPPProveedores()},actualizarPrecioTotal(){console.log("llamando a precio total"),console.log("this.datosAPI"),console.log(this.datosAPI),console.log("this.arrayInfoProveedores"),console.log(this.arrayInfoProveedores),this.datosAPI.forEach(o=>{let r=0,t=null;o.productos.forEach(e=>{let i=Number(e.precio_pp);Number(e.cantidad_proveedor);let c=i;console.log("ele.precio_pp"),console.log(e.precio_pp),console.log("ppParcial antes de sunar"),console.log(r),r=r+c,console.log("ppParcial despues de sunar"),console.log(r),t=e}),console.log("ppParcial"),console.log(r),console.log("proveedor@@@@@"),console.log(t),this.arrayInfoProveedores.forEach(e=>{if(e.proveedor_id==o.proveedor_id){console.log("ppParcial"),console.log(r),console.log("proveedor_id"),console.log(t),console.log("elemento1"),console.log(e);let i=0;i=r+Number(e.proveedor_monto_descuentos_bonificaciones)+Number(e.proveedor_monto_factura_A)+Number(e.proveedor_monto_flete),e.proveedor_monto_total_homogeneo=Number(i).toFixed(2),console.log("elemento1.proveedor_monto_total_homogeneo"),console.log(e.proveedor_monto_total_homogeneo)}})})},cambiarCantidadFactor(o,r){console.log("item cantidad factor"),console.log(o),console.log("scope.row"),console.log(r.row);let t=r.row.cantidad_a_comprar*o.factor;o.cantidad_proveedor=t.toFixed(2);let e=o.cantidad_proveedor*Number(o.precio_pu);o.precio_pp=e.toFixed(2),this.actualizarPrecioTotal(),this.marcarMenor()},cambiarPNG(o,r){console.log("item"),console.log(o),console.log("scope"),console.log(r);let t=o.precio_png+Number(o.iva)*.01*o.precio_png;o.precio_pu=Number(t).toFixed(2);let e=Number(o.cantidad_proveedor)*o.precio_pu;o.precio_pp=Number(e).toFixed(2),this.actualizarPrecioTotal(),this.marcarMenor()},agregar(o,r,t,e){console.log("scope"),console.log(o),console.log("item"),console.log(r),console.log("precio"),console.log(t),console.log("index"),console.log(e)},mostrarLabel(o){return o},sortChange(o){this.headerClick(o.column,event)},headerClick(o){console.log(o);let r=!1,t;this.datosAPI.forEach((e,i)=>{o.label==e.proveedor_nombre?(console.log(e),t=i,e.proveedorSeleccionado==!0?(e.proveedorSeleccionado=!1,r=!1):(e.proveedorSeleccionado=!0,r=!0),e.productos.forEach(c=>{c.productoSeleccionado==!1,c.productoSeleccionado=r})):(e.proveedorSeleccionado=!1,e.productos.forEach(c=>{c.productoSeleccionado=!1})),console.log("indexSeleccionado"),console.log(t)})},cambiarProveedorSeleccionado(o){console.log("this.datosAPI"),console.log(this.datosAPI),console.log("item"),console.log(o),this.datosAPI.forEach((r,t)=>{o.proveedor_id==r.proveedor_id?o.proveedorSeleccionado==!0?(r.proveedorSeleccionado=!0,r.productos.forEach(e=>{e.productoSeleccionado=!0})):(r.proveedorSeleccionado=!1,r.productos.forEach(e=>{e.productoSeleccionado=!1})):o.proveedorSeleccionado==!0&&(r.proveedorSeleccionado=!1,r.productos.forEach(e=>{e.productoSeleccionado=!1}))}),this.calcularTotalHomogeneo()},calcularTotalHomogeneo(){this.totalHomogeneo=0,this.datosAPI.forEach(r=>{r.productos.forEach(t=>{t.productoSeleccionado==!0&&(this.totalHomogeneo=this.totalHomogeneo+Number(t.precio_pp))})}),this.arrayTotal=[];let o={aux:null,totalHomogeneo:Number(this.totalHomogeneo).toFixed(2),aux2:null};this.arrayTotal.push(o),console.log("this.arrayTotal"),console.log(this.arrayTotal),this.calcularPrecioPPProveedores()},calcularPrecioPPProveedores(){let o=0;this.datosAPI.forEach(r=>{r.productos.forEach(t=>{t.productoSeleccionado==!0&&(console.log("////////"),console.log("ele.precio_pp"),console.log(t.precio_pp),console.log("precioPPParcial"),console.log(o),o=parseFloat(o)+t.precio_pp)}),this.arrayPrecioPPProveedores.forEach(t=>{if(t.proveedor_id==r.proveedor_id){console.log("*************"),console.log("precioPPParcial"),console.log(o),console.log("**************");let e=parseFloat(o);t.totalPP=e.toFixed(2)}}),o=0})},async getDatosProveedores(){await this.axios.get("/api/presupuestacionproductosproveedor/obtenerTodosProveedores/"+this.id).then(o=>{const r=o;r!=null&&(this.infoProveedores=r.data)}),await this.axios.get("/api/condicionpago/obtenerTodos").then(o=>{const r=o.data;this.condicionesPago=r}),this.infoProveedores.forEach(o=>{let r={created_at:o.created_at,presupuestacion_id:o.presupuestacion_id,presupuestacion_plan_id:o.presupuestacion_plan_id,presupuestacion_proveedor_id:o.presupuestacion_proveedor_id,proveedor_factura_A:o.proveedor_factura_A,proveedor_forma_de_pago:o.proveedor_forma_de_pago,proveedor_id:o.proveedor_id,proveedor_mail:o.proveedor_mail,proveedor_monto_descuentos_bonificaciones:o.proveedor_monto_descuentos_bonificaciones,proveedor_monto_factura_A:o.proveedor_monto_factura_A,proveedor_monto_flete:o.proveedor_monto_flete,proveedor_monto_totalPP:o.proveedor_monto_totalPP,proveedor_monto_total_homogeneo:o.proveedor_monto_total_homogeneo,proveedor_nombre:o.proveedor_nombre,proveedor_rubro_id:o.proveedor_rubro_id,proveedor_notas:null,updated_at:o.updated_at};this.condicionesPago.forEach(t=>{r.proveedor_forma_de_pago==t.condicionpago_id&&(r.proveedor_forma_de_pago_nombre=t.condicionpago_nombre)}),this.arrayInfoProveedores.push(r)}),console.log("this.arrayInfoProveedores"),console.log(this.arrayInfoProveedores),this.loadingTabla=!1},cellClick(o){console.log("param celdas")},getSummaries(o){console.log("param de getSummaries"),console.log(o),this.$refs.tablaComparativa;const r=[];let t=7;return this.datosAPI.forEach((e,i)=>{i==0&&(r[i]="Total"),r[t]=0,e.productos.forEach(c=>{r[t]=r[t]+c.precio_pp}),r[t]=r[t].toFixed(2),t=t+6}),console.log("sums"),console.log(r),r},cambiarSeleccionProductoSegmentado(o,r){console.log("cambio seleccionado"),console.log(o);let t=o.$index;console.log("index"),console.log(t);let e=o.cellIndex;console.log("cellIndex"),console.log(e),console.log("productos"),console.log(r),this.datosAPI.forEach((i,c)=>{i.productos.forEach((k,x)=>{k.producto_id==r.producto_id&&k.proveedor_id==r.proveedor_id&&(k.productoSeleccionado=!0),k.producto_id==r.producto_id&&k.proveedor_id!=r.proveedor_id&&(k.productoSeleccionado=!1)})}),this.calcularTotalHomogeneo()},abrirModalNotas(o){console.log("abrir"),console.log("notas"),console.log(o)},gurdarNotas(o,r,t){console.log("elemento"),console.log(o),console.log("notas"),console.log(r),console.log("item"),console.log(t)},guardarNotas(o,r){console.log("elemento desde modal"),console.log(o),this.arrayInfoProveedores.forEach(t=>{t.proveedor_id==o.item.proveedor_id&&(console.log("elementoProv"),console.log(t),t.proveedor_notas=o.notas)})},scroll(o,r){console.log("scrollLeft"),console.log(o),console.log("scrollTop"),console.log(r)},scrollLeft(){},headerStylePrincipalTable(o,r,t,e){if(o.rowIndex==1&&o.columnIndex==2)return{background:"#96ceb4",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==0)return{background:"#96ceb4",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==1)return{background:"#96ceb4",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==2)return{background:"#96ceb4",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==3)return{background:"#96ceb4",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==4)return{background:"#96ceb4",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==5)return{background:"#96ceb4",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==6)return{background:"#96ceb4",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==3)return{background:"#adcbe3",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==7)return{background:"#adcbe3",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==8)return{background:"#adcbe3",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==9)return{background:"#adcbe3",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==10)return{background:"#adcbe3",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==11)return{background:"#adcbe3",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==12)return{background:"#adcbe3",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==13)return{background:"#adcbe3",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==4)return{background:"#ffeead",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==14)return{background:"#ffeead",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==15)return{background:"#ffeead",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==16)return{background:"#ffeead",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==17)return{background:"#ffeead",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==18)return{background:"#ffeead",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==19)return{background:"#ffeead",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==20)return{background:"#ffeead",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==5)return{background:"#ff6f69",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==21)return{background:"#ff6f69",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==22)return{background:"#ff6f69",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==23)return{background:"#ff6f69",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==24)return{background:"#ff6f69",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==25)return{background:"#ff6f69",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==26)return{background:"#ff6f69",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==27)return{background:"#ff6f69",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==6)return{background:"#ffcc5c",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==28)return{background:"#ffcc5c",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==29)return{background:"#ffcc5c",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==30)return{background:"#ffcc5c",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==31)return{background:"#ffcc5c",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==32)return{background:"#ffcc5c",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==33)return{background:"#ffcc5c",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==34)return{background:"#ffcc5c",color:"#000000"}},headerStyleTotal(o,r,t,e){if(o.rowIndex==1&&o.columnIndex==2)return{background:"#96ceb4",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==0)return{background:"#96ceb4",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==1)return{background:"#96ceb4",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==2)return{background:"#96ceb4",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==3)return{background:"#96ceb4",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==4)return{background:"#96ceb4",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==5)return{background:"#96ceb4",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==7)return{background:"#96ceb4",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==3)return{background:"#adcbe3",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==7)return{background:"#adcbe3",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==8)return{background:"#adcbe3",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==9)return{background:"#adcbe3",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==10)return{background:"#adcbe3",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==11)return{background:"#adcbe3",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==12)return{background:"#ffeead",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==13)return{background:"#ffeead",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==4)return{background:"#ffeead",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==14)return{background:"#ffeead",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==15)return{background:"#ffeead",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==16)return{background:"#ffeead",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==17)return{background:"#ffeead",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==5)return{background:"#ff6f69",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==18)return{background:"#ff6f69",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==19)return{background:"#ff6f69",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==20)return{background:"#ff6f69",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==21)return{background:"#ff6f69",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==22)return{background:"#ff6f69",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==23)return{background:"#ff6f69",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==6)return{background:"#ffcc5c",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==24)return{background:"#ffcc5c",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==25)return{background:"#ffcc5c",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==26)return{background:"#ffcc5c",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==27)return{background:"#ffcc5c",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==28)return{background:"#ffcc5c",color:"#000000"};if(o.rowIndex==2&&o.columnIndex==29)return{background:"#ffcc5c",color:"#000000"}},headerStyle(o,r,t,e){if(o.rowIndex==0&&o.columnIndex==2)return{background:"#96ceb4",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==0)return{background:"#96ceb4",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==1)return{background:"#96ceb4",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==2)return{background:"#96ceb4",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==3)return{background:"#96ceb4",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==4)return{background:"#96ceb4",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==5)return{background:"#96ceb4",color:"#000000"};if(o.rowIndex==0&&o.columnIndex==3)return{background:"#adcbe3",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==6)return{background:"#adcbe3",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==7)return{background:"#adcbe3",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==8)return{background:"#adcbe3",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==9)return{background:"#adcbe3",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==10)return{background:"#adcbe3",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==11)return{background:"#adcbe3",color:"#000000"};if(o.rowIndex==0&&o.columnIndex==4)return{background:"#ffeead",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==12)return{background:"#ffeead",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==13)return{background:"#ffeead",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==14)return{background:"#ffeead",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==15)return{background:"#ffeead",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==16)return{background:"#ffeead",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==17)return{background:"#ffeead",color:"#000000"};if(o.rowIndex==0&&o.columnIndex==5)return{background:"#ff6f69",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==18)return{background:"#ff6f69",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==19)return{background:"#ff6f69",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==20)return{background:"#ff6f69",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==21)return{background:"#ff6f69",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==22)return{background:"#ff6f69",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==23)return{background:"#ff6f69",color:"#000000"};if(o.rowIndex==0&&o.columnIndex==6)return{background:"#ffcc5c",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==24)return{background:"#ffcc5c",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==25)return{background:"#ffcc5c",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==26)return{background:"#ffcc5c",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==27)return{background:"#ffcc5c",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==28)return{background:"#ffcc5c",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==29)return{background:"#ffcc5c",color:"#000000"}},headerStyleIntermedio(o,r,t,e){if(o.rowIndex==0&&o.columnIndex==2)return{background:"#96ceb4",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==0)return{background:"#96ceb4",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==1)return{background:"#96ceb4",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==2)return{background:"#96ceb4",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==3)return{background:"#96ceb4",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==4)return{background:"#96ceb4",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==5)return{background:"#96ceb4",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==6)return{background:"#96ceb4",color:"#000000"};if(o.rowIndex==0&&o.columnIndex==3)return{background:"#adcbe3",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==7)return{background:"#adcbe3",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==8)return{background:"#adcbe3",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==9)return{background:"#adcbe3",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==10)return{background:"#adcbe3",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==11)return{background:"#adcbe3",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==12)return{background:"#adcbe3",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==13)return{background:"#adcbe3",color:"#000000"};if(o.rowIndex==0&&o.columnIndex==4)return{background:"#ffeead",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==14)return{background:"#ffeead",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==15)return{background:"#ffeead",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==16)return{background:"#ffeead",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==17)return{background:"#ffeead",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==18)return{background:"#ffeead",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==19)return{background:"#ffeead",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==20)return{background:"#ffeead",color:"#000000"};if(o.rowIndex==0&&o.columnIndex==5)return{background:"#ff6f69",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==21)return{background:"#ff6f69",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==22)return{background:"#ff6f69",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==23)return{background:"#ff6f69",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==24)return{background:"#ff6f69",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==25)return{background:"#ff6f69",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==26)return{background:"#ff6f69",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==27)return{background:"#ff6f69",color:"#000000"};if(o.rowIndex==0&&o.columnIndex==6)return{background:"#ffcc5c",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==28)return{background:"#ffcc5c",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==29)return{background:"#ffcc5c",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==30)return{background:"#ffcc5c",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==31)return{background:"#ffcc5c",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==32)return{background:"#ffcc5c",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==33)return{background:"#ffcc5c",color:"#000000"};if(o.rowIndex==1&&o.columnIndex==34)return{background:"#ffcc5c",color:"#000000"}},headerCellStyle({row:o,column:r,rowIndex:t,columnIndex:e}){if(r.label=="PP"){if(e==2)return{background:"lightblue"};if(e==3)return{background:"lightgreen"}}if(r.label=="Proveedores")return console.log("row de cell style en Proveedores"),console.log(o),console.log("column de cell style en Proveedores"),console.log(r),console.log("rowIndex de cell style en Proveedores"),console.log(t),console.log("columnIndex de cell style en Proveedores"),console.log(e),{background:"blue"}},filterTag(o,r){let t=o;return console.log("value1"),console.log(t),console.log("row"),console.log(r),r},click(){console.log("e")},yellowBg(o,r,t,e){return console.log("entra a yellow"),{background:""}},seleccionar(o){console.log("paramSeleccionar"),console.log(o)},colorColumnas(o){return{background:"#eceb3c"}},classChecker({row:o,column:r,rowIndex:t,columnIndex:e}){if(e==2)return{background:"#96ceb4",color:"black"};if(e==3)return{background:"#96ceb4",color:"black"};if(e==4)return{background:"#96ceb4",color:"black"};if(e==5)return{background:"#96ceb4",color:"black"};if(e==6)return{background:"#96ceb4",color:"black"};if(e==7)return{background:"#96ceb4",color:"black"};if(e==8)return{background:"#96ceb4",color:"black"};if(e==9)return{background:"#adcbe3",color:"black"};if(e==10)return{background:"#adcbe3",color:"black"};if(e==11)return{background:"#adcbe3",color:"black"};if(e==12)return{background:"#adcbe3",color:"black"};if(e==13)return{background:"#adcbe3",color:"black"};if(e==14)return{background:"#adcbe3",color:"black"};if(e==15)return{background:"#adcbe3",color:"black"};if(e==16)return{background:"#ffeead",color:"black"};if(e==17)return{background:"#ffeead",color:"black"};if(e==18)return{background:"#ffeead",color:"black"};if(e==19)return{background:"#ffeead",color:"black"};if(e==20)return{background:"#ffeead",color:"black"};if(e==21)return{background:"#ffeead",color:"black"};if(e==22)return{background:"#ffeead",color:"black"};if(e==23)return{background:"#ff6f69",color:"black"};if(e==24)return{background:"#ff6f69",color:"black"};if(e==25)return{background:"#ff6f69",color:"black"};if(e==26)return{background:"#ff6f69",color:"black"};if(e==27)return{background:"#ff6f69",color:"black"};if(e==28)return{background:"#ff6f69",color:"black"};if(e==29)return{background:"#ff6f69",color:"black"};if(e==30)return{background:"#ffcc5c",color:"black"};if(e==31)return{background:"#ffcc5c",color:"black"};if(e==32)return{background:"#ffcc5c",color:"black"};if(e==33)return{background:"#ffcc5c",color:"black"};if(e==34)return{background:"#ffcc5c",color:"black"};if(e==35)return{background:"#ffcc5c",color:"black"};if(e==36)return{background:"#ffcc5c",color:"black"};if(e==37)return{background:"#adcbe3",color:"black"};if(e==38)return{background:"#e7eff6",color:"black"};if(e==39)return{background:"#e7eff6",color:"black"};if(e==40)return{background:"#e7eff6",color:"black"};if(e==41)return{background:"#e7eff6",color:"black"};if(e==42)return{background:"#e7eff6",color:"black"};if(e==43)return{background:"#e7eff6",color:"black"};if(e==44)return{background:"#ff6f69",color:"black"};if(e==45)return{background:"#ff6f69",color:"black"};if(e==46)return{background:"#ff6f69",color:"black"};if(e==47)return{background:"#ff6f69",color:"black"};if(e==48)return{background:"#ff6f69",color:"black"};if(e==49)return{background:"#ff6f69",color:"black"};if(e==50)return{background:"#ffcc5c",color:"black"};if(e==51)return{background:"#ffcc5c",color:"black"};if(e==52)return{background:"#ffcc5c",color:"black"};if(e==53)return{background:"#ffcc5c",color:"black"};if(e==54)return{background:"#ffcc5c",color:"black"};if(e==55)return{background:"#ffcc5c",color:"black"};if(e==56)return{background:"#adcbe3",color:"black"};if(e==57)return{background:"#adcbe3",color:"black"};if(e==58)return{background:"#adcbe3",color:"black"};if(e==59)return{background:"#adcbe3",color:"black"};if(e==60)return{background:"#adcbe3",color:"black"};if(e==61)return{background:"#adcbe3",color:"black"};if(e==62)return{background:"#e7eff6",color:"black"};if(e==63)return{background:"#e7eff6",color:"black"};if(e==64)return{background:"#e7eff6",color:"black"};if(e==65)return{background:"#e7eff6",color:"black"};if(e==66)return{background:"#e7eff6",color:"black"};if(e==67)return{background:"#e7eff6",color:"black"};if(e==68)return{background:"#ff6f69",color:"black"};if(e==69)return{background:"#ff6f69",color:"black"};if(e==70)return{background:"#ff6f69",color:"black"};if(e==71)return{background:"#ff6f69",color:"black"};if(e==72)return{background:"#ff6f69",color:"black"};if(e==73)return{background:"#ff6f69",color:"black"}},classCheckerIntermedio({row:o,column:r,rowIndex:t,columnIndex:e}){if(e==2)return{background:"#96ceb4",color:"black"};if(e==3)return{background:"#96ceb4",color:"black"};if(e==4)return{background:"#96ceb4",color:"black"};if(e==5)return{background:"#96ceb4",color:"black"};if(e==6)return{background:"#96ceb4",color:"black"};if(e==7)return{background:"#96ceb4",color:"black"};if(e==8)return{background:"#96ceb4",color:"black"};if(e==9)return{background:"#adcbe3",color:"black"};if(e==10)return{background:"#adcbe3",color:"black"};if(e==11)return{background:"#adcbe3",color:"black"};if(e==12)return{background:"#adcbe3",color:"black"};if(e==13)return{background:"#adcbe3",color:"black"};if(e==14)return{background:"#adcbe3",color:"black"};if(e==15)return{background:"#adcbe3",color:"black"};if(e==16)return{background:"#ffeead",color:"black"};if(e==17)return{background:"#ffeead",color:"black"};if(e==18)return{background:"#ffeead",color:"black"};if(e==19)return{background:"#ffeead",color:"black"};if(e==20)return{background:"#ffeead",color:"black"};if(e==21)return{background:"#ffeead",color:"black"};if(e==22)return{background:"#ffeead",color:"black"};if(e==23)return{background:"#ff6f69",color:"black"};if(e==24)return{background:"#ff6f69",color:"black"};if(e==25)return{background:"#ff6f69",color:"black"};if(e==26)return{background:"#ff6f69",color:"black"};if(e==27)return{background:"#ff6f69",color:"black"};if(e==28)return{background:"#ff6f69",color:"black"};if(e==29)return{background:"#ff6f69",color:"black"};if(e==30)return{background:"#ffcc5c",color:"black"};if(e==31)return{background:"#ffcc5c",color:"black"};if(e==32)return{background:"#ffcc5c",color:"black"};if(e==33)return{background:"#ffcc5c",color:"black"};if(e==34)return{background:"#ffcc5c",color:"black"};if(e==35)return{background:"#ffcc5c",color:"black"};if(e==36)return{background:"#ffcc5c",color:"black"};if(e==37)return{background:"#adcbe3",color:"black"};if(e==38)return{background:"#adcbe3",color:"black"};if(e==39)return{background:"#adcbe3",color:"black"};if(e==40)return{background:"#adcbe3",color:"black"};if(e==41)return{background:"#adcbe3",color:"black"};if(e==42)return{background:"#adcbe3",color:"black"};if(e==43)return{background:"#adcbe3",color:"black"};if(e==44)return{background:"#e7eff6",color:"black"};if(e==45)return{background:"#e7eff6",color:"black"};if(e==46)return{background:"#e7eff6",color:"black"};if(e==47)return{background:"#e7eff6",color:"black"};if(e==48)return{background:"#e7eff6",color:"black"};if(e==49)return{background:"#e7eff6",color:"black"};if(e==50)return{background:"#e7eff6",color:"black"};if(e==51)return{background:"#ff6f69",color:"black"};if(e==52)return{background:"#ff6f69",color:"black"};if(e==53)return{background:"#ff6f69",color:"black"};if(e==54)return{background:"#ff6f69",color:"black"};if(e==55)return{background:"#ff6f69",color:"black"};if(e==56)return{background:"#ff6f69",color:"black"};if(e==57)return{background:"#ff6f69",color:"black"};if(e==58)return{background:"#ffcc5c",color:"black"};if(e==59)return{background:"#ffcc5c",color:"black"};if(e==60)return{background:"#ffcc5c",color:"black"};if(e==61)return{background:"#ffcc5c",color:"black"};if(e==62)return{background:"#ffcc5c",color:"black"};if(e==63)return{background:"#ffcc5c",color:"black"};if(e==64)return{background:"#ffcc5c",color:"black"};if(e==65)return{background:"#adcbe3",color:"black"};if(e==66)return{background:"#adcbe3",color:"black"};if(e==67)return{background:"#adcbe3",color:"black"};if(e==68)return{background:"#adcbe3",color:"black"};if(e==69)return{background:"#adcbe3",color:"black"};if(e==70)return{background:"#adcbe3",color:"black"};if(e==71)return{background:"#adcbe3",color:"black"};if(e==72)return{background:"#e7eff6",color:"black"};if(e==73)return{background:"#e7eff6",color:"black"};if(e==74)return{background:"#e7eff6",color:"black"};if(e==75)return{background:"#e7eff6",color:"black"};if(e==76)return{background:"#e7eff6",color:"black"};if(e==77)return{background:"#e7eff6",color:"black"};if(e==78)return{background:"#e7eff6",color:"black"};if(e==79)return{background:"#ff6f69",color:"black"};if(e==80)return{background:"#ff6f69",color:"black"};if(e==81)return{background:"#ff6f69",color:"black"};if(e==82)return{background:"#ff6f69",color:"black"};if(e==83)return{background:"#ff6f69",color:"black"};if(e==84)return{background:"#ff6f69",color:"black"};if(e==85)return{background:"#ff6f69",color:"black"}},classCheckerTotal({row:o,column:r,rowIndex:t,columnIndex:e}){if(e==2)return{background:"#96ceb4",color:"black"};if(e==3)return{background:"#96ceb4",color:"black"};if(e==4)return{background:"#96ceb4",color:"black"};if(e==5)return{background:"#96ceb4",color:"black"};if(e==6)return{background:"#96ceb4",color:"black"};if(e==7)return{background:"#96ceb4",color:"black"};if(e==8)return{background:"#96ceb4",color:"black"};if(e==9)return{background:"#96ceb4",color:"black"};if(e==10)return{background:"#adcbe3",color:"black"};if(e==11)return{background:"#adcbe3",color:"black"};if(e==12)return{background:"#adcbe3",color:"black"};if(e==13)return{background:"#adcbe3",color:"black"};if(e==14)return{background:"#adcbe3",color:"black"};if(e==15)return{background:"#adcbe3",color:"black"};if(e==16)return{background:"#adcbe3",color:"black"};if(e==17)return{background:"#adcbe3",color:"black"};if(e==18)return{background:"#ffeead",color:"black"};if(e==19)return{background:"#ffeead",color:"black"};if(e==20)return{background:"#ffeead",color:"black"};if(e==21)return{background:"#ffeead",color:"black"};if(e==22)return{background:"#ffeead",color:"black"};if(e==23)return{background:"#ffeead",color:"black"};if(e==24)return{background:"#ffeead",color:"black"};if(e==25)return{background:"#ffeead",color:"black"};if(e==26)return{background:"#ff6f69",color:"black"};if(e==27)return{background:"#ff6f69",color:"black"};if(e==28)return{background:"#ff6f69",color:"black"};if(e==29)return{background:"#ff6f69",color:"black"};if(e==30)return{background:"#ff6f69",color:"black"};if(e==31)return{background:"#ff6f69",color:"black"};if(e==32)return{background:"#ff6f69",color:"black"};if(e==33)return{background:"#ff6f69",color:"black"};if(e==34)return{background:"#ffcc5c",color:"black"};if(e==35)return{background:"#ffcc5c",color:"black"};if(e==36)return{background:"#ffcc5c",color:"black"};if(e==37)return{background:"#ffcc5c",color:"black"};if(e==38)return{background:"#ffcc5c",color:"black"};if(e==39)return{background:"#ffcc5c",color:"black"};if(e==40)return{background:"#ffcc5c",color:"black"};if(e==41)return{background:"#ffcc5c",color:"black"};if(e==42)return{background:"#adcbe3",color:"black"};if(e==43)return{background:"#adcbe3",color:"black"};if(e==44)return{background:"#adcbe3",color:"black"};if(e==45)return{background:"#adcbe3",color:"black"};if(e==46)return{background:"#adcbe3",color:"black"};if(e==47)return{background:"#adcbe3",color:"black"};if(e==48)return{background:"#adcbe3",color:"black"};if(e==49)return{background:"#e7eff6",color:"black"};if(e==50)return{background:"#e7eff6",color:"black"};if(e==51)return{background:"#e7eff6",color:"black"};if(e==52)return{background:"#e7eff6",color:"black"};if(e==53)return{background:"#e7eff6",color:"black"};if(e==54)return{background:"#e7eff6",color:"black"};if(e==44)return{background:"#ff6f69",color:"black"};if(e==45)return{background:"#ff6f69",color:"black"};if(e==46)return{background:"#ff6f69",color:"black"};if(e==47)return{background:"#ff6f69",color:"black"};if(e==48)return{background:"#ff6f69",color:"black"};if(e==49)return{background:"#ff6f69",color:"black"};if(e==50)return{background:"#ffcc5c",color:"black"};if(e==51)return{background:"#ffcc5c",color:"black"};if(e==52)return{background:"#ffcc5c",color:"black"};if(e==53)return{background:"#ffcc5c",color:"black"};if(e==54)return{background:"#ffcc5c",color:"black"};if(e==55)return{background:"#ffcc5c",color:"black"};if(e==56)return{background:"#adcbe3",color:"black"};if(e==57)return{background:"#adcbe3",color:"black"};if(e==58)return{background:"#adcbe3",color:"black"};if(e==59)return{background:"#adcbe3",color:"black"};if(e==60)return{background:"#adcbe3",color:"black"};if(e==61)return{background:"#adcbe3",color:"black"};if(e==62)return{background:"#e7eff6",color:"black"};if(e==63)return{background:"#e7eff6",color:"black"};if(e==64)return{background:"#e7eff6",color:"black"};if(e==65)return{background:"#e7eff6",color:"black"};if(e==66)return{background:"#e7eff6",color:"black"};if(e==67)return{background:"#e7eff6",color:"black"};if(e==68)return{background:"#ff6f69",color:"black"};if(e==69)return{background:"#ff6f69",color:"black"};if(e==70)return{background:"#ff6f69",color:"black"};if(e==71)return{background:"#ff6f69",color:"black"};if(e==72)return{background:"#ff6f69",color:"black"};if(e==73)return{background:"#ff6f69",color:"black"}}}},Lr={class:"contenedorTablas"},Jr={style:{display:"flex","margin-bottom":"10px"}},jr={style:{margin:"auto"}},Yr=v(" Mover a la izquierda "),qr=v(" Mover a la derecha "),Kr={style:{overflow:"auto"},id:"midiv"},Qr={id:"tablaprueba",style:{height:"100%",width:"5000px"}},Wr=v(" i "),Xr=v(" i "),Zr={key:0},oe={key:1},re={key:0};function ee(o,r,t,e,i,c){const k=p("el-button"),x=p("el-button-group"),_=p("el-table-column"),b=p("el-input-number"),S=p("el-checkbox"),u=p("el-table"),y=p("el-option"),D=p("el-select"),I=p("el-input"),A=p("el-scrollbar"),V=p("modal"),g=p("modal-carga-por-proveedor-mostrar"),s=p("modal-notas"),E=G("loading");return f(),P(F,null,[l("div",null,[a(V,{ref:"modal",titulo:"Comparativa de productos","impedir-close":o.impedirClose,width:"99%"},{default:n(()=>[U((f(),P("div",null,[a(A,null,{default:n(()=>[l("div",Lr,[l("div",Jr,[l("div",jr,[a(x,null,{default:n(()=>[a(k,{type:"primary",icon:o.ArrowLeft,onClick:r[0]||(r[0]=m=>c.moverscroll(-80))},{default:n(()=>[Yr]),_:1},8,["icon"]),a(k,{type:"primary",onClick:r[1]||(r[1]=m=>c.moverscroll(80))},{default:n(()=>[qr]),_:1})]),_:1})])]),l("div",Kr,[l("div",Qr,[a(u,{data:i.arraySoloProductos,border:"",stripe:"",style:{width:"100%"},"show-summary":"",onSortChange:r[3]||(r[3]=m=>c.sortChange()),onCellClick:c.cellClick,ref:"tablaComparativa","cell-style":c.classChecker,"header-cell-style":c.headerStylePrincipalTable,"scrollbar-always-on":""},{default:n(()=>[a(_,{label:"Productos",align:"center",style:{"background-color":"red"},fixed:""},{default:n(()=>[a(_,{prop:"date",label:"Nombre",align:"center",width:"200px"},{default:n(m=>[v(h(m.row.producto_nombre),1)]),_:1}),a(_,{prop:"date",label:"Cant. a comprar",align:"center",width:"100px"},{default:n(m=>[a(b,{modelValue:m.row.cantidad_a_comprar,"onUpdate:modelValue":H=>m.row.cantidad_a_comprar=H,style:{width:"100%"},controls:!1,onChange:H=>c.cambiarCantidad(m)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})]),_:1}),a(_,{label:"Proveedores",align:"center"},{default:n(()=>[(f(!0),P(F,null,N(i.datosAPI,(m,H)=>(f(),T(_,{key:H,label:m.proveedor_nombre,align:"center","column-key":m.proveedor_id,"cell-style":c.colorColumnas(H)},{header:n(()=>[a(S,{modelValue:m.proveedorSeleccionado,"onUpdate:modelValue":C=>m.proveedorSeleccionado=C,label:m.proveedor_nombre,size:"large",onChange:C=>c.cambiarProveedorSeleccionado(m)},null,8,["modelValue","onUpdate:modelValue","label","onChange"]),a(k,{type:"primary",size:"small",circle:"",style:{"margin-left":"5px"},onClick:C=>o.$refs.modalCargaPorProveedorMostrar.abrir(m.proveedor_id,m.presupuestacion_id)},{default:n(()=>[Wr]),_:2},1032,["onClick"])]),default:n(()=>[a(_,{label:"Factor",align:"center",prop:"factor",width:"80px"},{default:n(C=>[a(b,{modelValue:m.productos[C.$index].factor,"onUpdate:modelValue":$=>m.productos[C.$index].factor=$,controls:!1,style:{width:"100%"},onChange:$=>c.cambiarCantidadFactor(m.productos[C.$index],C)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024),a(_,{label:"Cant",align:"center",prop:"cantProv",width:"80px"},{default:n(C=>[v(h(parseFloat(m.productos[C.$index].cantidad_proveedor)),1)]),_:2},1024),a(_,{label:"PNG",align:"center",prop:"png",width:"150px"},{default:n(C=>[a(b,{modelValue:m.productos[C.$index].precio_png,"onUpdate:modelValue":$=>m.productos[C.$index].precio_png=$,controls:!1,style:{width:"100%"},onChange:$=>c.cambiarPNG(m.productos[C.$index],C)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024),a(_,{label:"%IVA",align:"center",prop:"iva",width:"60px"},{default:n(C=>[v(h(parseFloat(m.productos[C.$index].iva)),1)]),_:2},1024),a(_,{label:"$ IVA",align:"center",prop:"montoIva",width:"90px"},{default:n(C=>[v(" $ "+h(new Intl.NumberFormat("de-DE").format(parseFloat(m.productos[C.$index].totaliva))),1)]),_:2},1024),a(_,{label:"PU",align:"center",prop:"pu",width:"140px"},{default:n(C=>[v(" $ "+h(new Intl.NumberFormat("de-DE").format(parseFloat(m.productos[C.$index].precio_pu))),1)]),_:2},1024),a(_,{label:"PP",align:"center",onSelect:r[2]||(r[2]=C=>c.seleccionar(o.param)),style:{"background-color":"red"},prop:"pp",width:"190px",size:"small"},{default:n(C=>[a(S,{modelValue:m.productos[C.$index].productoSeleccionado,"onUpdate:modelValue":$=>m.productos[C.$index].productoSeleccionado=$,label:"$"+new Intl.NumberFormat("de-DE").format(parseFloat(m.productos[C.$index].precio_pp)),"text-color":"#ffff",onChange:$=>c.cambiarSeleccionProductoSegmentado(C,m.productos[C.$index]),style:{color:"black"}},null,8,["modelValue","onUpdate:modelValue","label","onChange"])]),_:2},1024)]),_:2},1032,["label","column-key","cell-style"]))),128))]),_:1})]),_:1},8,["data","onCellClick","cell-style","header-cell-style"]),a(u,{stripe:"",data:i.arrayTotal,"cell-style":c.classCheckerIntermedio,"header-cell-style":c.headerStyleIntermedio,id:"tabla2"},{default:n(()=>[a(_,{width:"200px"}),a(_,{width:"100px"}),(f(!0),P(F,null,N(i.arrayInfoProveedores,(m,H)=>(f(),T(_,{key:H,align:"center"},{default:n(()=>[a(_,{width:"180px",label:"F.P.",align:"center"},{default:n(()=>[a(D,{modelValue:m.proveedor_forma_de_pago_nombre,"onUpdate:modelValue":C=>m.proveedor_forma_de_pago_nombre=C,class:"m-2",placeholder:"Select",size:"large"},{default:n(()=>[(f(!0),P(F,null,N(i.arrayFormaPago,C=>(f(),T(y,{key:C.key,label:C.label,value:C.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(_,{width:"100px",label:"Notas",align:"center"},{default:n(()=>[a(I,{controls:!1,style:{width:"100%"},modelValue:m.proveedor_notas,"onUpdate:modelValue":C=>m.proveedor_notas=C},{prepend:n(()=>[a(k,{width:"10%",onClick:C=>o.$refs.modalNotas.abrir(m)},{default:n(()=>[Xr]),_:2},1032,["onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(_,{width:"70px",label:"Fact. A",align:"center"},{default:n(()=>[m.proveedor_factura_A==0?(f(),P("span",Zr," No ")):M("",!0),m.proveedor_factura_A==1?(f(),P("span",oe," Si ")):M("",!0)]),_:2},1024),a(_,{width:"110px",label:"$ Fact. A",align:"center"},{default:n(()=>[a(b,{controls:!1,style:{width:"100%"},modelValue:m.proveedor_monto_factura_A,"onUpdate:modelValue":C=>m.proveedor_monto_factura_A=C,onChange:r[4]||(r[4]=C=>c.actualizarPrecioTotal())},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(_,{width:"100px",label:"Flete",align:"center"},{default:n(()=>[a(b,{controls:!1,style:{width:"100%"},modelValue:m.proveedor_monto_flete,"onUpdate:modelValue":C=>m.proveedor_monto_flete=C,onChange:r[5]||(r[5]=C=>c.actualizarPrecioTotal())},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(_,{width:"100px",label:"DyB",align:"center"},{default:n(()=>[a(b,{controls:!1,style:{width:"100%"},modelValue:m.proveedor_monto_descuentos_bonificaciones,"onUpdate:modelValue":C=>m.proveedor_monto_descuentos_bonificaciones=C,onChange:r[6]||(r[6]=C=>c.actualizarPrecioTotal())},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(_,{width:"130px",label:"Total",align:"center"},{default:n(()=>[v(" $ "+h(new Intl.NumberFormat("de-DE").format(m.proveedor_monto_total_homogeneo)),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["data","cell-style","header-cell-style"]),a(u,{data:i.arrayTotal,style:{"margin-top":"15px"},"cell-style":c.classCheckerTotal,"header-cell-style":c.headerStyleTotal,stripe:""},{default:n(()=>[a(_,{label:"Compra seg.",align:"center",width:"200px"},{default:n(m=>[v(h(new Intl.NumberFormat("de-DE").format(m.row.totalHomogeneo)),1)]),_:1}),a(_,{label:"",width:"100px"}),(f(!0),P(F,null,N(i.arrayPrecioPPProveedores,(m,H)=>(f(),T(_,{key:H,label:m.titulo,align:"center",width:"99px"},{default:n(()=>[isNaN(m.totalPP)?M("",!0):(f(),P("span",re," $ "+h(new Intl.NumberFormat("de-DE").format(m.totalPP)),1))]),_:2},1032,["label"]))),128))]),_:1},8,["data","cell-style","header-cell-style"])])])])]),_:1})])),[[E,i.loadingTabla]])]),_:1},8,["impedir-close"])]),a(g,{ref:"modalCargaPorProveedorMostrar"},null,512),a(s,{ref:"modalNotas","onUpdate:cantidadSacarDeposito":r[7]||(r[7]=m=>c.guardarNotas(m,o.arrayCantidadesDeposito))},null,512)],64)}var ae=z(Gr,[["render",ee],["__scopeId","data-v-689e811b"]]);const te={components:{ModalNuevo:Ko,ModalDetalle:ir,ModalCarga:Dr,ModalComparativa:ae},data(){return{loading:!1,presupuestaciones:[],loading:!1,tipoUsuario:null}},mounted(){this.obtenerTipoUsuario(),this.obtenerTodos(),this.obtenerTodosArticulo()},methods:{obtenerTipoUsuario(){this.tipoUsuario=localStorage.getItem("tipoUsuario")},async obtenerTodos(){this.loading=!0,await this.axios.get("/api/presupuestacion/obtenerTodos").then(o=>{console.log(o.data),this.presupuestaciones=o.data}),this.loading=!1},async obtenerTodosArticulo(){this.loading=!0,await this.axios.get(this.base_url+"/articulo/obtenerTodos").then(o=>{this.articulos=o.data}),this.loading=!1},formatearFecha(o){return new Date(o).toLocaleDateString()},formatearFechaSinDia(o){let r=new Date(o);return r.getMonth()+1+"/"+r.getFullYear()}}},ie=l("h1",null,"Provisi\xF3n",-1),ne={key:0},ce=v(" Nuevo "),le={class:"contenedor-tabla",style:{"margin-top":"15px"}},de=l("span",{class:"material-icons"},"add_shopping_cart",-1),se=l("span",{class:"material-icons"},"view_week",-1),ue=l("span",{class:"material-icons"},"visibility",-1),pe={key:1},fe=l("h1",null,"No tiene permisos para realizar esta acci\xF3n",-1),_e=[fe];function ge(o,r,t,e,i,c){const k=p("el-button"),x=p("el-table-column"),_=p("el-table"),b=p("el-card"),S=p("modal-nuevo"),u=p("modal-carga"),y=p("modal-detalle"),D=p("modal-comparativa"),I=G("loading");return f(),P(F,null,[l("main",null,[a(b,null,{header:n(()=>[ie]),default:n(()=>[i.tipoUsuario==1?(f(),P("div",ne,[a(k,{type:"primary",onClick:r[0]||(r[0]=A=>o.$refs.modalNuevo.abrir()),class:"btnElement",style:{"margin-left":"10px"}},{default:n(()=>[ce]),_:1}),l("div",le,[U((f(),T(_,{data:i.presupuestaciones,stripe:"",style:{width:"100%"}},{default:n(()=>[a(x,{prop:"presupuestacion_id",label:"Nro.",width:"100px"}),a(x,{prop:"presupuestacion_plan_nombre",label:"Fecha de creaci\xF3n"},{default:n(A=>[v(h(c.formatearFecha(A.row.presupuestacion_fecha_creacion)),1)]),_:1}),a(x,{prop:"presupuestacion_plan_nombre",label:"Plan"}),a(x,{prop:"presupuestacion_rubro_nombre",label:"Rubro"},{default:n(A=>[v(h(A.row.presupuestacion_rubro_nombre),1)]),_:1}),a(x,{prop:"rangoProvisi\xF3n",label:"Rango"},{default:n(A=>[v(h(c.formatearFechaSinDia(A.row.presupuestacion_fecha_incio))+" - "+h(c.formatearFechaSinDia(A.row.presupuestacion_fecha_fin)),1)]),_:1}),a(x,{label:"Carga",prop:"editar","header-align":"right",align:"right",width:"90px"},{default:n(A=>[a(k,{type:"primary",circle:"",onClick:V=>o.$refs.modalCarga.abrir(A.row.presupuestacion_id)},{default:n(()=>[de]),_:2},1032,["onClick"])]),_:1}),a(x,{label:"Comparativa",prop:"comparativa","header-align":"center",align:"center",width:"110px"},{default:n(A=>[a(k,{type:"primary",circle:"",onClick:V=>o.$refs.modalComparativa.abrir(A.row.presupuestacion_id)},{default:n(()=>[se]),_:2},1032,["onClick"])]),_:1}),a(x,{label:"Detalle",prop:"detalle","header-align":"right",align:"right",width:"90px"},{default:n(A=>[a(k,{type:"primary",circle:"",onClick:V=>o.$refs.modalDetalle.abrir(A.row.presupuestacion_id)},{default:n(()=>[ue]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[I,i.loading]])])])):(f(),P("div",pe,_e))]),_:1})]),a(S,{ref:"modalNuevo",onActualizarTabla:c.obtenerTodos},null,8,["onActualizarTabla"]),a(u,{ref:"modalCarga"},null,512),a(y,{ref:"modalDetalle"},null,512),a(D,{ref:"modalComparativa"},null,512)],64)}var he=z(te,[["render",ge]]);export{he as default};
